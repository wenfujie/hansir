(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-225156b8"],{1313:function(t,e,s){"use strict";var a=s("6371"),i=s.n(a);i.a},2888:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap"},[s("div",{staticClass:"flex-auto overflow-scroll"},[s("div",{staticClass:"goods"},[s("div",{staticClass:"img",class:{cusTag:1===t.good.orderFlag}},[s("img",{attrs:{src:t.getImg(t.good.thumb),onerror:"errImg(event)"}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(t.good.goodsName))]),s("div",{staticClass:"price-and-num"},[s("div",{staticClass:"price"},[t._v("￥"+t._s(t._f("Fix2")(t.good.averagePrice)))]),s("div",{staticClass:"num"},[t._v("×"+t._s(t.good.applyNum||0))])])])]),s("div",{staticClass:"content"},[s("div",{staticClass:"group"},[t._m(0),s("div",{staticClass:"action",on:{click:function(e){t.getPostSaleWay()}}},[t._v("\n                    "+t._s(t.way.returnTypeName||"请选择售后类型")+"\n                    "),s("i",{staticClass:"iconfont icon-gengduo"})])]),s("div",{staticClass:"group"},[t._m(1),s("div",{staticClass:"action",on:{click:function(e){t.getReason()}}},[t._v("\n                    "+t._s(t.reason.reasonName||"请选择售后原因")+"\n                    "),s("i",{staticClass:"iconfont icon-gengduo"})])]),0===t.selectedGoods.length&&t.isChange?s("div",{staticClass:"group"},[s("div",{staticClass:"title flex-vcenter pdB20"},[t._v("\n                    换货商品\n                    "),s("span",{staticClass:"red"},[t._v("*")]),t.good.orderFlag?s("span",{staticClass:"fs24 grey66 pdL10"},[t._v("该商品为定制商品,不支持换货")]):t._e()]),t.good.orderFlag?t._e():s("div",{staticClass:"action",on:{click:function(e){t.changeGood()}}},[t._v("\n                    请选择需要换货的商品\n                    "),s("i",{staticClass:"iconfont icon-youfan"})])]):t._e(),t.selectedGoods.length>0&&t.isChange?s("div",{staticClass:"group"},[s("div",{staticClass:"title flex-between"},[t._m(2),t.remainQty>0?s("a",{staticClass:"fs28 mgR30",on:{click:function(e){t.changeGood()}}},[t._v("继续添加")]):t._e()]),t.good.orderFlag?t._e():s("div",{staticClass:"pdTb10 borderB1c"},t._l(t.selectedGoods,function(e,a){return s("div",{key:a,staticClass:"flex-between"},[s("div",{staticClass:"flex-box fs32B Wrap"},[s("div",{staticClass:"flex-vcenter pdL30 pdTb10"},[s("span",{staticClass:"color"},[t._v(t._s(e.colorName))]),s("span",{staticClass:"size mgL30"},[t._v(t._s(e.sizeName))]),s("span",{staticClass:"size mgL30"},[t._v("x"+t._s(e.partAmount))])])]),s("div",{staticClass:"del flex-vcenter mgR30 grey99",on:{click:function(e){t.delGoodFromSelectedGoods(a)}}},[t._v("x")])])}))]):t._e(),t.isRepair?s("div",{staticClass:"group"},[t._m(3),s("div",{staticClass:"num-select"},[s("i",{staticClass:"iconfont icon-jianshao",on:{click:function(e){t.minus()}}}),s("van-field",{directives:[{name:"inputfix",rawName:"v-inputfix"}],attrs:{border:!1,type:"number",pattern:"[0-9]*"},model:{value:t.params.amount,callback:function(e){t.$set(t.params,"amount",e)},expression:"params.amount"}}),s("i",{staticClass:"iconfont icon-zengjia",on:{click:function(e){t.increase()}}})],1)]):t._e(),t.isReturn?s("div",{staticClass:"group"},[t._m(4),s("div",{staticClass:"num-select"},[s("i",{staticClass:"iconfont icon-jianshao",on:{click:function(e){t.minus()}}}),s("van-field",{directives:[{name:"inputfix",rawName:"v-inputfix"}],attrs:{border:!1,type:"number",pattern:"[0-9]*"},model:{value:t.params.amount,callback:function(e){t.$set(t.params,"amount",e)},expression:"params.amount"}}),s("i",{staticClass:"iconfont icon-zengjia",on:{click:function(e){t.increase()}}})],1)]):t._e(),t.isRefund?s("div",{staticClass:"group"},[t._m(5),s("div",{staticClass:"flex-vcenter flex-between fs28 border-bottom-gray pd10"},[s("van-field",{directives:[{name:"inputfix",rawName:"v-inputfix"}],staticClass:"flex-auto h100 pd10",attrs:{type:"number",placeholder:"请输入退款金额",clearable:"",border:!1},model:{value:t.returnsAmount,callback:function(e){t.returnsAmount=e},expression:"returnsAmount"}}),s("div",{staticClass:"grey66"},[t._v("(最多可退款退 "+t._s(t._f("Fix2")(t.placeholder))+" 元 )")])],1)]):t._e(),s("div",{staticClass:"group"},[s("div",{staticClass:"title"},[t._v("售后说明")]),s("div",{staticClass:"description"},[s("van-field",{directives:[{name:"inputfix",rawName:"v-inputfix",value:"textarea",expression:"'textarea'"}],attrs:{type:"textarea",rows:"1",autosize:"",clearable:"",placeholder:"请输入售后说明",maxlength:"100"},model:{value:t.params.reasonMemo,callback:function(e){t.$set(t.params,"reasonMemo",e)},expression:"params.reasonMemo"}}),s("span",[t._v(t._s(t.params.reasonMemo.length)+"/100")])],1)]),s("upload-file",{attrs:{good:t.good,images:t.images},on:{"update:images":function(e){t.images=e}}})],1)]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"submit",on:{click:function(e){t.submitPostSale()}}},[t._v("提 交")])]),s("van-popup",{attrs:{overlay:!0,position:"top"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"popup-wrap"},[s("div",{staticClass:"action-icon"},[s("i",{staticClass:"iconfont icon-shanchuguanbi",on:{click:function(e){t.close()}}}),s("i",{staticClass:"iconfont icon-queding",on:{click:function(e){t.confirm()}}})]),s("div",{staticClass:"goods border-bottom-gray padding-tb30"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.getImg(t.good.thumb),alt:""}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(t.good.goodsName))]),s("div",{staticClass:"price-and-num"},[s("div",{staticClass:"price"},[t._v("￥"+t._s(t._f("Fix2")(t.good.averagePrice)))]),s("div",{staticClass:"num"},[t._v("剩余可换货件数 ×"+t._s(t.remainQty))])])])]),s("div",{staticClass:"group padding-lr30"},[s("div",{staticClass:"title"},[t._v("换货颜色")]),s("div",{staticClass:"img-group"},t._l(t.colorList,function(e,a){return s("img",{key:a,class:{selected:a===t.colorSelectedIndex},attrs:{src:t.getImg(e.lumpThumb),alt:""},on:{click:function(s){t.selectColor(e,a)}}})}))]),s("div",{staticClass:"group padding-lr30"},[s("div",{staticClass:"title"},[t._v("换货尺码")]),s("div",{staticClass:"size-group"},t._l(t.sizeList,function(e,a){return s("div",{key:a,staticClass:"size",class:{active:a===t.sizeSelectedIndex},on:{click:function(s){t.selectSize(e,a)}}},[t._v(t._s(e.sizeName))])}))]),s("div",{staticClass:"group padding-lr30"},[s("div",{staticClass:"title"},[t._v("换货数量")]),s("div",{staticClass:"num-select"},[s("i",{staticClass:"iconfont icon-jianshao",on:{click:function(e){t.minusForChange()}}}),s("span",{staticClass:"number"},[t._v(t._s(t.skuInfo.partAmount))]),s("i",{staticClass:"iconfont icon-zengjia",on:{click:function(e){t.increaseForChange()}}})])])])]),t.showReason?s("wheelPicker",{attrs:{data:t.reasons,label:"reasonName",confirm:t.selectReason,show:t.showReason},on:{"update:show":function(e){t.showReason=e}}}):t._e(),t.showWays?s("wheelPicker",{attrs:{data:t.ways,label:"returnTypeName",confirm:t.selectWay,show:t.showWays},on:{"update:show":function(e){t.showWays=e}}}):t._e()],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[t._v("\n                    售后类型\n                    "),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[t._v("\n                    售后原因\n                    "),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",[t._v("换货商品")]),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title",staticStyle:{border:"none"}},[t._v("\n                    返修数量\n                    "),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title",staticStyle:{border:"none"}},[t._v("\n                    退货数量\n                    "),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title border-bottom-gray"},[t._v("\n                    退款金额\n                    "),s("span",{staticClass:"red"},[t._v("*")])])}],n=(s("a481"),s("ac6a"),s("456d"),s("e7e5"),s("d399")),o=(s("96cf"),s("1da1")),r=(s("be7f"),s("565f")),c=(s("8a58"),s("e41f")),l=s("4624"),u=s("b17f"),d=s("bf3c"),h={components:{wheelPicker:l["a"],uploadFile:u["a"],"van-popup":c["a"],"van-field":r["a"]},data:function(){return{show:!1,good:{},way:{},ways:[],showWays:!1,reason:{},reasons:[],showReason:!1,selectedGoods:[],colorList:[],colorSelectedIndex:0,sizeList:[],sizeSelectedIndex:0,returnsAmount:null,isChange:!1,isRepair:!1,isReturn:!1,isRefund:!1,disableUploadfile:!1,params:{amount:1,returnsAmount:null,busCountsCode:baseConstant.busContsCode,changeReplayCode:null,ordDtId:0,reaSonCode:"",reapplycode:"",reasonMemo:"",returnTypeCode:"",savePictInfo:[],skuInfo:[],skuId:""},skuInfo:{sizeCode:"",sizeName:"",colorCode:"",colorName:"",partAmount:0,ptiPartHdCode:0},imgs:[],images:[],isDisabled:!1}},methods:{getRouteParams:function(){return d["a"].isEmpty(this.$route.params)?this.Storage.get("paramsForApply"):(this.Storage.set("paramsForApply",this.$route.params),this.$route.params)},initParams:function(){return this.good=this.getRouteParams(),console.log("good",this.good),this.params.ordDtId=this.good.saleOrdDtId,this.params.skuId=this.good.skuId,this.params.changeReplayCode=this.good.reApplyCode||null,this.skuInfo.ptiPartHdCode=this.good.goodsCode,this.params},getPostSaleWay:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(d["a"].isEmpty(this.ways)){t.next=3;break}return this.showWays=!0,t.abrupt("return");case 3:return e={saleOrdDtId:this.params.ordDtId},t.next=6,this.$get("postSale/getWays",e);case 6:s=t.sent,200===s.status?(this.ways=s.data.returnTypeList||[],this.showWays=!0):this.ways=[],console.log("result",this.ways);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectWay:function(t){this.way=t,this.isChange=!1,this.isRepair=!1,this.isReturn=!1,this.isRefund=!1,this.params.returnTypeCode=t.returnTypeCode,"D_CHANGEPART"===t.returnTypeCode?(this.getSkuInfo(),this.isChange=!0):"D_REPAIR"===t.returnTypeCode?(this.isRepair=!0,this.params.amount=1):"D_RETURNSALES"===t.returnTypeCode?(this.isReturn=!0,this.params.amount=1):"D_ONLYDRAWBACK"===t.returnTypeCode&&(this.isRefund=!0),console.log("way",t)},getReason:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(d["a"].isEmpty(this.reasons)){t.next=3;break}return this.showReason=!0,t.abrupt("return");case 3:return e={pageNum:1,pageSize:10,effFlag:1},t.next=6,this.$get("postSale/getReason",e);case 6:s=t.sent,s.data.list&&(this.reasons=s.data.list,console.log("reasons",this.reasons),this.showReason=!0);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectReason:function(t){this.reason=t,console.log("reson",t),this.params.reaSonCode=t.reasonCode,this.showReason=!1},changeGood:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("rparams",this.$route.params),this.remainQty>0?this.skuInfo.partAmount=1:this.skuInfo.partAmount=0,this.show=!0;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getSkuInfo:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(d["a"].isEmpty(this.sizeList)){t.next=2;break}return t.abrupt("return");case 2:return e={busContsCode:"D_BUSCONTS_WSC",goodsCode:this.$route.params.goodsCode,shopCode:this.Storage.get("shopCode").code},t.next=5,this.$get("goods/info",e);case 5:s=t.sent,this.colorList=s.colorsVoList,this.sizeList=s.sizesVoList,this.skuInfo.sizeCode=this.sizeList[0].sizeCode,this.skuInfo.sizeName=this.sizeList[0].sizeName,this.skuInfo.colorCode=this.colorList[0].colorCode,this.skuInfo.colorName=this.colorList[0].colorName;case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectSize:function(t,e){this.sizeSelectedIndex=e,this.skuInfo.sizeName=t.sizeName,this.skuInfo.sizeCode=t.sizeCode,this.skuInfo.sizeId=t.sizeId},selectColor:function(t,e){this.colorSelectedIndex=e,this.skuInfo.colorCode=t.colorCode,this.skuInfo.colorName=t.colorName,this.skuInfo.colorId=t.colorId},increaseForChange:function(){this.skuInfo.partAmount<this.remainQty?(this.skuInfo.partAmount+=1,this.params.amount-=1):Object(n["a"])("申请数量不能大于可换货件数")},minusForChange:function(){this.skuInfo.partAmount-=1,this.skuInfo.partAmount<1&&(this.skuInfo.partAmount=1)},copySku:function(t){var e=this,s={},a=Object.keys(t);return a.forEach(function(t){s[t]=e.skuInfo[t]}),s},confirm:function(){if(this.remainQty>0){var t=this.copySku(this.skuInfo);this.selectedGoods.push(t)}this.show=!1},delGoodFromSelectedGoods:function(t){this.selectedGoods.splice(t,1)},close:function(){console.log("close"),this.show=!1},increase:function(){this.params.amount<this.remainQty?this.params.amount+=1:"D_REPAIR"==this.params.returnTypeCode?Object(n["a"])("返修数量不能大于购买数量！"):"D_RETURNSALES"==this.params.returnTypeCode&&Object(n["a"])("退货数量不能大于购买数量！")},minus:function(){1!==this.params.amount&&(this.params.amount-=1)},calNumOfChange:function(){var t=0;return this.selectedGoods.forEach(function(e){t+=e.partAmount}),t},submitPostSale:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!d["a"].isEmpty(this.params.returnTypeCode)){t.next=5;break}return Object(n["a"])("请选择售后类型"),t.abrupt("return");case 5:if(!d["a"].isEmpty(this.params.reaSonCode)){t.next=8;break}return Object(n["a"])("请选择售后原因"),t.abrupt("return");case 8:t.t0=this.way.returnTypeCode,t.next="D_ONLYDRAWBACK"===t.t0?11:"D_CHANGEPART"===t.t0?21:32;break;case 11:if(!d["a"].isEmpty(this.params.returnsAmount)){t.next=16;break}return Object(n["a"])("请填写退款金额！"),t.abrupt("return");case 16:if(!(this.params.returnsAmount<=0)){t.next=19;break}return Object(n["a"])("退款金额不能为0！"),t.abrupt("return");case 19:return this.params.amount=this.good.applyNum,t.abrupt("break",32);case 21:if(this.params.skuInfo=this.selectedGoods,this.params.amount=this.calNumOfChange(),1!=this.good.orderFlag){t.next=28;break}return Object(n["a"])("定制商品不支持申请换货！"),t.abrupt("return");case 28:if(!d["a"].isEmpty(this.selectedGoods)){t.next=31;break}return Object(n["a"])("请至少选择一件商品!"),t.abrupt("return");case 31:return t.abrupt("break",32);case 32:return this.params.savePictInfo=this.images,t.next=35,this.$post("postSale/submitApply",this.params);case 35:e=t.sent,200===e.status?(Object(n["a"])(e.data),this.$router.replace({name:"postSaleList"})):Object(n["a"])(e.data);case 37:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.initParams()},computed:{remainQty:function(){var t=0;return this.selectedGoods.forEach(function(e){t+=e.partAmount}),this.good.applyNum-t},placeholder:function(){return this.good.averagePrice*this.good.applyNum},amount:function(){}},watch:{returnsAmount:function(t){var e=this.good.averagePrice*this.good.applyNum||0;t>e?this.returnsAmount=e.toFixed(2):this.params.returnsAmount=t},"params.amount":function(t){t<=1?this.params.amount=1:t>=this.remainQty?("D_REPAIR"==this.params.returnTypeCode?Object(n["a"])("返修数量不能大于购买数量！"):"D_RETURNSALES"==this.params.returnTypeCode&&Object(n["a"])("退货数量不能大于购买数量！"),this.params.amount=this.remainQty):this.params.amount=t}}},p=h,f=(s("3797"),s("2877")),m=Object(f["a"])(p,a,i,!1,null,"d959ba8a",null);m.options.__file="post-sale-apply.vue";e["default"]=m.exports},3797:function(t,e,s){"use strict";var a=s("4ad2"),i=s.n(a);i.a},4624:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"overlay",on:{click:function(e){e.preventDefault(),t.close()}}},[s("div",{staticClass:"laycontent"},[s("div",{staticClass:"picker-panel",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"picker-choose fs28 pd20 bg-gray"},[s("div",{on:{click:function(e){t.close()}}},[t._v("取消")]),s("div",{staticClass:"color-red",on:{click:function(e){t.makeSure()}}},[t._v("确定")])]),s("div",{staticClass:"picker-content"},[s("div",{ref:"wheelWrapper",staticClass:"wheel-wrapper"},[s("div",{staticClass:"wheel"},[s("ul",{staticClass:"wheel-scroll"},t._l(t.leftData,function(e,a){return s("li",{key:a,staticClass:"wheel-item fs32B",class:{active:t.selectedIndex===a}},[t._v(t._s(e[t.label]))])}))])]),t.rightData?s("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper"},[s("ul",{staticClass:"scroll-view"},t._l(t.rightData,function(e,a){return s("li",{key:a,staticClass:"scroll-item fs32",class:{active:t.sideIndex===a},on:{click:function(s){t.reflect(a,e.reflectIndex)}}},[t._v(t._s(e.value))])}))]):t._e()])])])])},i=[],n=(s("ac6a"),s("456d"),s("1fba")),o=s("bf3c"),r={name:"WheelPicker",props:{data:{},label:{type:String,default:"name"},confirm:{type:Function},show:{default:!1}},data:function(){return{leftData:[],rightData:[],selectedIndex:0,sideIndex:0,seletedModel:{},showlayer:this.show}},methods:{initWheel:function(){var t=this,e=this.$refs.wheelWrapper;this.wheel?this.wheel.refresh():(this.wheel=new n["a"](e.children[0],{preventDefault:!0,wheel:{selectedIndex:this.selectedIndex,adjustTime:400,wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item"},probeType:3}),this.wheel.on("scroll",function(){t.selectedIndex=t.wheel.getSelectedIndex(),t.seletedModel=t.leftData[t.selectedIndex],o["a"].isEmpty(t.seletedModel)||(t.sideIndex=t.seletedModel.index,t.sideScroll.wheelTo(t.sideIndex))}))},initSideScroll:function(){this.$refs.scrollWrapper&&(this.sideScroll?this.sideScroll.refresh():this.sideScroll=new n["a"](this.$refs.scrollWrapper,{preventDefault:!1,wheel:{selectedIndex:this.sideIndex,rotate:0,adjustTime:400,wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item"},probeType:3}))},initData:function(){var t=this;if(this.data instanceof Array)this.leftData=this.data;else{var e=0,s=Object.keys(this.data);s.forEach(function(s,a){t.data[s].forEach(function(e){e.index=a,t.leftData.push(e)}),e+=t.data[s].length;var i={};i.value=s,i.reflectIndex=0===a?0:e-t.data[s].length,t.rightData.push(i)})}this.seletedModel=this.leftData[0]},reflect:function(t,e){var s=this;console.log("reflect"),this.$nextTick(function(){s.wheel.isInTransition||(s.sideIndex=t,s.wheel.wheelTo(e),s.selectedIndex=e,s.seletedModel=s.leftData[e],s.initWheel())})},close:function(){this.updateState()},makeSure:function(){this.confirm&&this.confirm(this.seletedModel),this.updateState()},init:function(){var t=this;this.initData(),this.$nextTick(function(){t.initWheel(),t.initSideScroll(),t.showlayer=t.show})},updateState:function(){this.showlayer=!1,this.$emit("update:show",this.showlayer)},updateSelectModel:function(){this.$emit("update:seletedmodel",this.seletedModel)}},created:function(){this.init()},mounted:function(){this.initSideScroll(),this.initWheel()},watch:{show:function(t){this.init()},data:function(t){this.init()}}},c=r,l=(s("1313"),s("2877")),u=Object(l["a"])(c,a,i,!1,null,"44d29534",null);u.options.__file="WheelPicker.vue";e["a"]=u.exports},"4ad2":function(t,e,s){},6371:function(t,e,s){},a8d8:function(t,e,s){},b17f:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),s("div",{staticClass:"img-group"},[t.isBeyongLimit?s("van-uploader",{staticClass:"img-box border-dash flex-center",attrs:{"after-read":t.onRead,disabled:t.isDisabled}},[s("div",{staticClass:"flex-center w100 h100"},[s("span",[t._v("+")])])]):t._e(),t._l(t.imgs,function(e,a){return s("div",{key:a,staticClass:"img-box box-border"},[s("div",{staticClass:"icon-box",on:{click:function(e){t.delImg(a)}}},[t._v("X")]),s("img",{attrs:{src:e.content,alt:""}})])})],2)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"group"},[s("div",{staticClass:"upload"},[t._v("上传图片\n      "),s("span",{staticClass:"limit"},[t._v("支持最多上传5张,每张最大2M")])])])}],n=(s("7f7f"),s("5548"),s("a8d8"),s("fe7e")),o=Object(n["a"])({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.b()},[t._t("default"),s("input",t._b({ref:"input",class:t.b("input"),attrs:{type:"file",accept:t.accept,disabled:t.disabled},on:{change:t.onChange}},"input",t.$attrs,!1))],2)},name:"uploader",inheritAttrs:!1,props:{disabled:Boolean,beforeRead:Function,afterRead:Function,accept:{type:String,default:"image/*"},resultType:{type:String,default:"dataUrl"},maxSize:{type:Number,default:Number.MAX_VALUE}},methods:{onChange:function(t){var e=this,s=t.target.files;!this.disabled&&s.length&&(s=1===s.length?s[0]:[].slice.call(s,0),!s||this.beforeRead&&!this.beforeRead(s)||(Array.isArray(s)?Promise.all(s.map(this.readFile)).then(function(t){var a=!1,i=s.map(function(i,n){return i.size>e.maxSize&&(a=!0),{file:s[n],content:t[n]}});e.onAfterRead(i,a)}):this.readFile(s).then(function(t){e.onAfterRead({file:s,content:t},s.size>e.maxSize)})))},readFile:function(t){var e=this;return new Promise(function(s){var a=new FileReader;a.onload=function(t){s(t.target.result)},"dataUrl"===e.resultType?a.readAsDataURL(t):"text"===e.resultType&&a.readAsText(t)})},onAfterRead:function(t,e){e?this.$emit("oversize",t):(this.afterRead&&this.afterRead(t),this.$refs.input&&(this.$refs.input.value=""))}}}),r=(s("2b61"),{name:"upload-file",props:{good:{commentPictList:[],images:[]}},components:{"van-uploader":o},data:function(){return{imgs:[],images:[],isDisabled:!1}},methods:{onRead:function(t){var e=this;this.isDisabled=!0,uploadImg(t.file).then(function(s){console.log(s);var a=s.uploadDetail.successDetail;e.images.push({fileLength:a.fileSize,md5:a.md5,pictPath:a.filePath,sourceFileName:t.file.name,pictClass:"D_COMMENTPICT"}),e.imgs.push(t),e.$emit("update:images",e.images),e.imgs.length>=5?e.isDisabled=!0:e.isDisabled=!1})},delImg:function(t){this.imgs.splice(t,1),this.images.splice(t,1),this.isDisabled=!1}},computed:{isBeyongLimit:function(){return 5!=this.imgs.length}}}),c=r,l=(s("d984"),s("2877")),u=Object(l["a"])(c,a,i,!1,null,"171eafd0",null);u.options.__file="uploadFile.vue";e["a"]=u.exports},beb8:function(t,e,s){},d984:function(t,e,s){"use strict";var a=s("beb8"),i=s.n(a);i.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31f12262"],{1905:function(t,e,n){"use strict";e["a"]={D_UNCONFIRMEAPPLY:"待审核",D_UNRETURN:"待寄回",D_CONFIRMEDAPPLY:"待寄回",D_REFUSED:"已拒绝",D_FINISHAPPLY:"已完成",D_ONDISPOSE:"已寄回",D_CANCELED:"已取消",D_UNCONFIRMEDRE:"待审核",D_CONFIRMEDRE:"待寄回",D_REDONE:"已完成",D_CANCELLATION:"已关闭",D_UNRECIVE:"已寄回",D_UNSEND:"待寄回",D_UNRECEIVE:"已寄回",D_HADERCEIVE:"处理中",D_QUALITYTEST:"处理中",D_HASRETUEN:"已关闭",D_RET_CHACE:"已关闭",D_INSTOCK:"已完成",D_RECIVED:"待处理",D_REPAIRING:"维修中",D_REPAIRED:"维修完成",D_SERVICED:"已完成",D_SERVICANCEL:"已关闭",D_SERUNPAY:"待支付"}},"1ce7":function(t,e,n){},4165:function(t,e,n){"use strict";n("e7e5");var r=n("d399"),a=(n("c5f6"),n("96cf"),n("1da1"));n("a481"),n("4917");function i(t,e){var n={timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.prepayId,paySign:t.paySign},r=new Promise(function(t,r){t(0==e?0:n)});return r}e["a"]=function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e,n,a,s,o){var c,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=Number(a),console.log(a,"_----"),0!==a){t.next=4;break}return t.abrupt("return",a);case 4:return c={usrId:e.Storage.get("USER_INFO").usrId,paymentCode:"D_WEIXIN",tradeTypeCode:"JSAPI",paymentTypeCode:o||"D_FULL",shopCode:e.Storage.get("USER_INFO").shopCode,orderList:n,orderType:s||null,openId:e.Storage.get("WECHAT_INFO").openid,payAmount:Number(a),unionId:Storage.get("properties").publicAccount},console.log(a,"===="),t.next=8,e.$post("payment/orderPayment",c);case 8:if(u=t.sent,"200"!==u.code){t.next=13;break}return t.abrupt("return",i(u,a));case 13:return Object(r["a"])(u.message),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}},t,this)}));return function(e,n,r,a,i){return t.apply(this,arguments)}}()},"465e":function(t,e,n){"use strict";var r=n("92a8"),a=n.n(r);a.a},"4a98":function(t,e,n){"use strict";var r=n("18a0"),a=n.n(r),i={miniProgramPay:function(t,e,n){var r={timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,paySign:t.paySign,successUrl:e,failUrl:n||"/show"},i={config:r};a.a.miniProgram.navigateTo({url:"/page/pay/pay?payData="+encodeURIComponent(JSON.stringify(i))})},WebPay:function(t,e,n,r){a.a.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["chooseWXPay"]}),a.a.chooseWXPay({timestamp:e.timestamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(t){if(-1===n.indexOf("http://")&&-1===n.indexOf("https://"))window.location.protocol,window.location.host,window.location.pathname;else window.location.href=n},error:function(t){if(-1===r.indexOf("http://")&&-1===r.indexOf("https://"))window.location.protocol,window.location.host,window.location.pathname;else window.location.href=r}})}};e["a"]=i},"92a8":function(t,e,n){},bac5:function(t,e,n){"use strict";n.d(e,"c",function(){return d}),n.d(e,"b",function(){return h}),n.d(e,"f",function(){return g}),n.d(e,"e",function(){return m}),n.d(e,"d",function(){return N}),n.d(e,"g",function(){return C}),n.d(e,"i",function(){return R}),n.d(e,"h",function(){return _}),n.d(e,"j",function(){return E}),n.d(e,"a",function(){return D});n("a481"),n("e7e5");var r=n("d399"),a=(n("e17f"),n("2241")),i=(n("7f7f"),n("96cf"),n("1da1")),s=(n("f751"),n("f26a")),o=n("bf3c4"),c=n("bf3c"),u=n("4a98"),p=n("4165"),l=n("1905"),d=function(t,e){t.$router.push({name:e,params:Object.assign(t.data,{curStateName:t.curStateName,curTypeName:t.curTypeName})})},f=function(t){return new Promise(function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(n,r){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a={reApplyCode:""},"postSaleList"===t.$route.name?a.reApplyCode=t.data.reapplycode:a.reApplyCode=b(t).reapplycode,e.next=4,t.$put("postSale/cancelApply",a);case 4:i=e.sent,n(i);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},h=function(t){return new Promise(function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(n,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a["a"].confirm({title:"取消申请",message:"您确定要取消该售后申请单吗？",confirmButtonText:"确定"}).then(function(){f(t).then(function(t){200===t.statusCode?(Object(r["a"])("取消成功"),n(t)):(Object(r["a"])("取消失败"),console.log("取消失败"),i(-1))})});case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},g=function(t){var e=t.data.goodsList[0],n=Object.assign(e,{applyNum:t.data.applyAmountQty,reApplyCode:null});t.$router.push({name:"postSaleApply",params:n})},m=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){var a,i,s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=l["a"][n],"待审核"==a){t.next=4;break}return Object(r["a"])("当前申请单订单"+a+"无法修改申请,请重新刷新"),t.abrupt("return",!1);case 4:return i=e.data.goodsList[0],t.next=7,e.$get("postSale/getApplyNum",{rtlOrdDtId:i.saleOrdDtId}).then(function(t){return t},function(t){Object(r["a"])("获取可申请数量失败")});case 7:s=t.sent,o=Object.assign(i,{applyNum:e.data.applyAmountQty+s.applyNum,reApplyCode:e.data.reApplycode||e.data.reapplycode}),e.$router.replace({name:"postSaleApply",params:o});case 10:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),b=function(t){var e=t.$route.params;return c["a"].isEmpty(e)&&(e=t.$route.query),c["a"].isEmpty(e)?t.Storage.get("psdParams"):(t.Storage.set("psdParams",e),e)},y=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=b(e),r={reApplyCode:n.reapplycode},t.next=4,e.$get("postSale/getDetail",r);case 4:return a=t.sent,t.abrupt("return",Object.assign(a.data,{curStateName:n.curStateName,curTypeName:n.curTypeName}));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r={code:n,pageNo:1,pageSize:10},t.next=3,Object(s["getShopList"])(r);case 3:return a=t.sent,t.abrupt("return",a.list);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),S=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={pageNum:1,pageSize:0,effFlag:1},t.next=3,e.$get("postSale/getExpressCompanies",n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),w=function(){return o["a"]},N=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:return e.data=t.sent,e.cityList=w(),t.next=6,S(e);case 6:e.logisList=t.sent,e.btnName=null,e.btnModify=null,e.returnWayCode="kdth",e.Storage.set("EXPRE",{}),t.t0=e.ordStateMap[e.data.applyStatusCode],t.next="待审核"===t.t0?14:"待支付"===t.t0?18:"待寄回"===t.t0?21:"已寄回"===t.t0?24:"待处理"===t.t0?26:"已取消"===t.t0?28:"已拒绝"===t.t0?30:"已关闭"===t.t0?33:"已完成"===t.t0?35:37;break;case 14:return e.btnName="取消申请",e.btnStyle="bg-grey",e.btnModify="修改申请",t.abrupt("break",39);case 18:return e.btnName="立即支付",e.btnStyle="bg-red",t.abrupt("break",39);case 21:return e.btnName="提交",e.btnStyle="bg-red",t.abrupt("break",39);case 24:return e.btnName=null,t.abrupt("break",39);case 26:return e.btnName=null,t.abrupt("break",39);case 28:return e.btnName=null,t.abrupt("break",39);case 30:return e.btnName=null,e.btnStyle="bg-red",t.abrupt("break",39);case 33:return e.btnName=null,t.abrupt("break",39);case 35:return e.btnName=null,t.abrupt("break",39);case 37:e.btnName=null,e.btnModify=null;case 39:return t.next=41,v(e);case 41:e.storeList=t.sent;case 42:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.area=n,e.store={},t.prev=2,t.next=5,v(e,n[2].code);case 5:e.storeList=t.sent,e.showAreaList=!1,console.log("获取门店",e.storeList),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),alert("请求失败",t.t0);case 13:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,n){return t.apply(this,arguments)}}(),R=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.store=n,e.showStoreList=!0,console.log("store",e.store);case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),_=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.logis=n,console.log("logis",n);case 2:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),x=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=e.data.reApplycode,r=e.data.ticketMoney,a="D_PAY_REPAIR",Object(p["a"])(e,n,r,a).then(function(t){if(0==t)e.initState();else{var r="/postSaleDetail?reapplycode="+n;u["a"].miniProgramPay(t,r,r)}});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),E=function(t,e){t.returnWayCode=e,t.store={},t.logis={}},O=function(t,e){switch(t.returnWayCode){case"kdth":return c["a"].isEmpty(e.expressCode)?(Object(r["a"])("请填写快递单号"),!1):c["a"].isEmpty(e.shippingId)?(Object(r["a"])("请选择物流公司"),!1):(e.shopId=t.Storage.get("USER_INFO").shopId,!0);case"mdth":return e.shippingId=null,c["a"].isEmpty(e.shopId)?(Object(r["a"])("请选择门店地址"),!1):(e.addressId=null,!0)}},k=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n={reApplyCode:e.data.reApplycode,returnWayCode:e.returnWayCode,shippingId:e.logis.id,addressId:e.Storage.get("address").id,expressCode:e.Storage.get("EXPRE").expressNo,shopId:e.store.id},O(e,n)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$post("postSale/savePostSaleLogis",n);case 5:a=t.sent,500==a?Object(r["a"])("提交失败"):(Object(r["a"])("提交成功"),N(e),e.store={},e.logis={});case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=n,t.next="取消申请"===t.t0?3:"重新申请"===t.t0?5:"修改申请"===t.t0?7:"提交"===t.t0?9:"立即支付"===t.t0?11:13;break;case 3:return h(e).then(function(){N(e)}),t.abrupt("break",13);case 5:return g(e),t.abrupt("break",13);case 7:return y(e).then(function(t){m(e,t.applyStatusCode),N(e)}),t.abrupt("break",13);case 9:return k(e),t.abrupt("break",13);case 11:return x(e),t.abrupt("break",13);case 13:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},f03b:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady?n("div",{staticClass:"bg-white pdTb10 mgB30"},[n("div",{staticClass:"fs30B text-center mgT30"},[t._v(t._s(t.title))]),n("van-steps",{attrs:{direction:"vertical",active:0,"active-color":"#C41717"}},t._l(t.sliceList,function(e,r){return n("van-step",{key:r},[n("h3",[t._v(t._s(e.acceptStation))]),n("p",[t._v(t._s(e.acceptTime))])])})),n("div",{staticClass:"fs26 text-center pdTb10",on:{click:function(e){t.toggle()}}},[t._v("\n    "+t._s(t.actionName)+"\n    "),n("i",{staticClass:"iconfont icon-down",class:{rotatingUp:t.direction,rotatingDown:!t.direction}})])],1):t._e()},a=[],i=(n("e7e5"),n("d399")),s=(n("96cf"),n("1da1")),o=(n("5548"),n("fe7e")),c=Object(o["a"])({render:function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"van-hairline",class:e.b([e.$parent.direction,(t={},t[e.status]=e.status,t)])},[r("div",{class:e.b("title"),style:e.titleStyle},[e._t("default")],2),r("div",{class:e.b("circle-container")},["process"!==e.status?r("i",{class:e.b("circle")}):r("icon",{style:{color:e.$parent.activeColor},attrs:{name:"checked"}})],1),r("div",{class:e.b("line")})])},name:"step",beforeCreate:function(){this.$parent.steps.push(this)},computed:{status:function(){var t=this.$parent.steps.indexOf(this),e=this.$parent.active;return t<e?"finish":t===e?"process":void 0},titleStyle:function(){return"process"===this.status?{color:this.$parent.activeColor}:{}}}}),u=(n("1ce7"),Object(o["a"])({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.b([t.direction])},[t.title||t.description?n("div",{class:t.b("status")},[t.icon||t.$slots.icon?n("div",{class:t.b("icon")},[t._t("icon",[n("icon",{class:t.iconClass,attrs:{name:t.icon}})])],2):t._e(),n("div",{class:t.b("message")},[n("div",{class:t.b("title"),domProps:{textContent:t._s(t.title)}}),n("div",{staticClass:"van-ellipsis",class:t.b("desc"),domProps:{textContent:t._s(t.description)}})]),t._t("message-extra")],2):t._e(),n("div",{class:t.b("items",{alone:!t.title&&!t.description})},[t._t("default")],2)])},name:"steps",props:{icon:String,title:String,active:Number,iconClass:String,description:String,direction:{type:String,default:"horizontal"},activeColor:{type:String,default:"#06bf04"}},data:function(){return{steps:[]}}})),p=n("bf3c"),l=n("d4ec"),d=n("bee2"),f=n("adb5"),h=function(){function t(){Object(l["a"])(this,t)}return Object(d["a"])(t,null,[{key:"getLogis",value:function(t){return f["a"].post("thirdParty/getLogis",t)}}]),t}(),g=h,m={props:{data:{},title:{type:String,default:"物流信息"}},data:function(){return{logis:{},logisCache:{},traceList:[],sliceList:[],actionName:"展开",direction:!1,isReady:!1}},components:{"van-steps":u,"van-step":c},methods:{getLogisInfo:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.logis={},e={expressCode:this.data.expressCode,logisticCode:this.data.expressNo},p["a"].isEmpty(this.logisCache[this.data.expressNo])){t.next=6;break}this.logis=this.logisCache[this.data.expressNo],t.next=10;break;case 6:return t.next=8,g.getLogis(e).catch(function(){Object(i["a"])("获取物流信息失败")});case 8:this.logis=t.sent,this.logisCache[this.data.expressNo]=this.logis;case 10:if(!p["a"].isEmpty(this.logis)){t.next=12;break}return t.abrupt("return");case 12:this.isReady=!0,this.traceList=this.logis.data.traceList,this.sliceList=this.traceList.slice(0,2);case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),toggle:function(){this.sliceList.length<=2?(this.sliceList=this.traceList,this.actionName="收起",this.direction=!0):(this.sliceList=this.traceList.slice(0,2),this.direction=!1,this.actionName="展开")},initData:function(){this.isReady=!1,"kdps"===this.data.shippingWayCode&&this.data.expressNo&&this.getLogisInfo()}},created:function(){this.initData()},watch:{data:function(){this.initData()}}},b=m,y=(n("465e"),n("2877")),v=Object(y["a"])(b,r,a,!1,null,"5af3df74",null);v.options.__file="logistic.vue";e["a"]=v.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af52df58"],{3867:function(e,t,a){},"3acc":function(e,t,a){"use strict";var s=a("fe7e");t["a"]=Object(s["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.b()},[e._t("default")],2)},name:"checkbox-group",props:{value:Array,disabled:Boolean,max:{default:0,type:Number}},watch:{value:function(e){this.$emit("change",e)}}})},"3c32":function(e,t,a){"use strict";a("5548"),a("dae9")},"3f28":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"member-information"},[e._l(e.memberInfo,function(t,i){return s("div",{key:i,staticClass:"detail-cell",class:["D_FEATURE_CHOTYPE_OPEN"===t.selectClassDictCode?"top-margin":""]},[s("div",{class:["D_FEATURE_CHOTYPE_OPEN"!==t.selectClassDictCode||"D_FEATURE_WRITETYPE_SELECT"!=t.inputClassDictCode&&1!==t.showPicFlag?"cell-title":"none-title"]},[s("span",[e._v(e._s(t.featureName))]),1==t.mustFlag?s("span",{staticClass:"red-star"},[e._v("*")]):s("span",[e._v(" ")])]),"D_FEATURE_CHOTYPE_DOWN"===t.selectClassDictCode&&"D_FEATURE_WRITETYPE_SELECT"==t.inputClassDictCode?s("div",{staticClass:"cell-content",on:{click:function(a){e.showPopup(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.valuemName,expression:"item.valuemName"}],staticClass:"van-field__control",attrs:{placeholder:t.inputDesc,readonly:"readonly",unselectable:"on",onfocus:"this.blur()"},domProps:{value:t.valuemName},on:{input:function(a){a.target.composing||e.$set(t,"valuemName",a.target.value)}}})]):e._e(),"D_FEATURE_WRITETYPE_TEXT"===t.inputClassDictCode?s("div",{staticClass:"cell-content pain_row"},[s("van-field",{directives:[{name:"inputfix",rawName:"v-inputfix"}],staticClass:"van-field__control",attrs:{placeholder:t.inputDesc,clearable:"","data-value":t.values,value:t.customValueName},on:{input:function(a){e.aaa(t)},focus:e.getFoucs,change:function(a){e.typeLimit(t,a)}},model:{value:t.values,callback:function(a){e.$set(t,"values",a)},expression:"item.values"}})],1):e._e(),"D_FEATURE_CHOTYPE_OPEN"==t.selectClassDictCode&&0==t.showPicFlag?s("div",{staticClass:"cell-content radius"},["D_FEATURE_SHOWTYPE_ONE"==t.unfoldClassDictCode||"D_FEATURE_SHOWTYPE_MORE"==t.unfoldClassDictCode?s("div",[s("div",{staticClass:"mod-tel"},[e._m(0,!0),s("div",{staticClass:"displayinbl"},[e._v("\n                    "+e._s(t.featureName)+"\n                    ")]),1==t.mustFlag?s("div",{staticClass:"red-star displayinbl"},[e._v("*")]):s("span",[e._v(" ")])]),"D_FEATURE_SHOWTYPE_ONE"==t.unfoldClassDictCode?s("ul",{staticClass:"check-list pdT30"},e._l(t.valueDtoList,function(i,o){return s("li",{key:o,class:["check-item",{selected:t.values==i.id}],on:{click:function(e){t.values=i.id}}},[e._v("\n             "+e._s(i.valuemName)+"\n             "),s("img",{directives:[{name:"show",rawName:"v-show",value:t.values==i.id,expression:"item.values == child.id"}],attrs:{src:a("c69b")}})])})):e._e(),"D_FEATURE_SHOWTYPE_MORE"==t.unfoldClassDictCode?s("ul",{staticClass:"check-list pdT30"},e._l(t.valueDtoList,function(i,o){return s("li",{key:o,class:["check-item",{selected:-1!=t.valuesArr.indexOf(i.id)}],on:{click:function(a){e.handleCheckItem(i,t.valuesArr)}}},[e._v("\n             "+e._s(i.valuemName)+"\n             "),s("img",{directives:[{name:"show",rawName:"v-show",value:-1!=t.valuesArr.indexOf(i.id),expression:"item.valuesArr.indexOf(child.id) != -1"}],attrs:{src:a("c69b")}})])})):e._e()]):e._e()]):e._e(),"D_FEATURE_CHOTYPE_OPEN"===t.selectClassDictCode&&1===t.showPicFlag?s("div",{staticClass:"cell-content model-div"},[s("div",[s("div",{staticClass:"mod-tel"},[e._m(1,!0),s("div",{staticClass:"displayinbl"},[e._v("\n                    "+e._s(t.featureName)+"\n                    ")]),1==t.mustFlag?s("div",{staticClass:"red-star displayinbl"},[e._v("*")]):s("span",[e._v(" ")])]),s("ul",e._l(t.valueDtoList,function(o,r){return s("li",{key:r,staticClass:"mod-item"},["D_FEATURE_SHOWTYPE_ONE"==t.unfoldClassDictCode?s("div",{on:{click:function(t){e.toggleSelected(i,r)}}},[s("div",{staticClass:"type-img",class:[1==o.defaultFlag?"pain-red":"pain-white"]},[1==o.defaultFlag?s("div",{staticClass:"item-tip"},[s("img",{attrs:{src:a("c69b"),alt:""}})]):e._e(),s("img",{attrs:{src:e.getImg(o.fileUrl),alt:""}})]),s("div",{staticClass:"type-tel"},[e._v(e._s(o.valuemName))]),s("div",{staticClass:"type-content"},[e._v(e._s(o.memo))])]):e._e(),"D_FEATURE_SHOWTYPE_MORE"==t.unfoldClassDictCode?s("div",{on:{click:function(t){e.muchToggleSelected(i,r)}}},[s("div",{staticClass:"type-img",class:[1==o.defaultFlag?"pain-red":"pain-white"]},[1==o.defaultFlag?s("div",{staticClass:"item-tip"},[s("img",{attrs:{src:a("c69b"),alt:""}})]):e._e(),s("img",{attrs:{src:e.getImg(o.fileUrl),alt:""}})]),s("div",{staticClass:"type-tel"},[e._v(e._s(o.valuemName))]),s("div",{staticClass:"type-content"},[e._v("\n                                   "+e._s(o.memo)+"\n                               ")])]):e._e()])}))])]):e._e()])}),s("button",{staticClass:"bottom-btn3",on:{click:e.putUserInfo}},[s("p",{staticClass:"btn-txt"},[e._v(e._s(e.confirm))])]),s("van-popup",{attrs:{position:"bottom"},model:{value:e.showUserSelect,callback:function(t){e.showUserSelect=t},expression:"showUserSelect"}},[s("van-picker",{directives:[{name:"show",rawName:"v-show",value:e.sexPickerShow,expression:"sexPickerShow"}],staticClass:"picker-fixed",attrs:{columns:e.columns,"show-toolbar":""},on:{change:e.onSexChange,cancel:function(t){e.onCancel("sexPickerShow")},confirm:e.onSexConfirm}})],1),s("van-popup",{attrs:{position:"bottom"},model:{value:e.showUserSelect,callback:function(t){e.showUserSelect=t},expression:"showUserSelect"}},[s("van-datetime-picker",{directives:[{name:"show",rawName:"v-show",value:e.birthdayPickerShow,expression:"birthdayPickerShow"}],staticClass:"picker-fixed",attrs:{type:"date",maxDate:e.maxDate,"min-date":e.minDate},on:{change:e.onBirthday,cancel:function(t){e.onCancel("birthdayPickerShow")},confirm:e.onBirthdayConfirm},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1),s("van-popup",{attrs:{position:"bottom"},model:{value:e.showMemberSelect,callback:function(t){e.showMemberSelect=t},expression:"showMemberSelect"}},[s("van-picker",{staticClass:"picker-fixed",attrs:{columns:e.changeMemberInfo,"show-toolbar":""},on:{cancel:e.cancelMemberInfo,confirm:e.changeMember}})],1),s("van-popup",{model:{value:e.mobilePhoneDolag,callback:function(t){e.mobilePhoneDolag=t},expression:"mobilePhoneDolag"}},[s("div",{staticClass:"box"},[s("div",{staticClass:"wrapper phone-box"},[s("div",{staticClass:"form-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNum,expression:"phoneNum"}],staticClass:"wd100",attrs:{type:"tel",placeholder:"请输入手机号"},domProps:{value:e.phoneNum},on:{input:function(t){t.target.composing||(e.phoneNum=t.target.value)}}})]),s("div",{staticClass:"form-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.captcha,expression:"captcha"}],staticClass:"captcha-text wd70 fl",attrs:{type:"tel",placeholder:"请输入验证码"},domProps:{value:e.captcha},on:{input:function(t){t.target.composing||(e.captcha=t.target.value)}}}),s("button",{staticClass:"captcha-btn color-red wd30 fr",class:[1==e.captchaLocked?"disabled":""],on:{click:e.checkPhone}},[e._v(e._s(e.captchaText))])]),s("div",{staticClass:"bottom-btn",on:{click:e.bindPhone}},[e._v("立即绑定")])])])])],2)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mod_img"},[s("img",{attrs:{src:a("8156")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mod_img"},[s("img",{attrs:{src:a("8156")}})])}],o=(a("96cf"),a("1da1")),r=(a("e7e5"),a("d399")),n=(a("28a5"),a("ac6a"),a("a481"),a("4ddd"),a("9f14")),u=(a("3c32"),a("417e")),l=(a("a909"),a("3acc")),c=(a("a44c"),a("e27c")),m=(a("8a58"),a("e41f")),d=(a("d1cf"),a("ee83")),h=(a("5f5f"),a("f253")),f=(a("c3a6"),a("ad06")),v=(a("be7f"),a("565f")),p=(a("c5f6"),a("22ce")),b=a("2b61"),g={name:"BodyDataForm",props:{msg:String,chichun:Number,s_type:Boolean,otherBillCode:String,partIds:String,cb:{type:Function}},components:{"van-field":v["a"],"van-icon":f["a"],"van-picker":h["a"],"van-datetime-picker":d["a"],"van-popup":m["a"],"van-radio-group":c["a"],"van-checkbox-group":l["a"],"van-checkbox":u["a"],"van-radio":n["a"]},data:function(){return{aiId:"",actionPage:null,confirm:"保存",s_lock:!0,s_list:["a","b","c"],s_result:["a","b"],phoneNum:"",captcha:"",captchaText:"获取验证码",captchaLocked:!1,time:60,checkStatus:!1,btnLock:!1,mobilePhoneDolag:!1,username:"",userEmail:"",columns:[{text:"男",value:"D_MALE"},{text:"女",value:"D_FEMALE"}],sexPickerShow:!1,birthdayPickerShow:!1,usersex:"",userSexCode:"",userphone:"",userbirthday:"",currentDate:"",maxDate:new Date,minDate:new Date(1900,1,1),userheight:"",userweight:"",userwaist:"",userInfo:{},memberInfo:[],showUserSelect:!1,showMemberSelect:!1,memberType:"",changeMemberInfo:[],actionType:null}},methods:{bubbleSort:function(e){for(var t=e.length,a=0;a<t;a++)for(var s=0;s<t-1-a;s++)if(e[s].showSeq>e[s+1].showSeq){var i=e[s+1];e[s+1]=e[s],e[s]=i}return e},handleCheckItem:function(e,t){var a=t.indexOf(e.id);-1!=a?t.splice(a,1):t.push(e.id)},NumberCheck:function(e){var t=e,a=t.substr(0,1),s=t.substr(1,1);if(t.length>1&&0==a&&"."!=s&&(t=t.substr(1,1)),"."==a&&(t=""),-1!=t.indexOf(".")){var i=t.substr(t.indexOf(".")+1);-1!=i.indexOf(".")&&(t=t.substr(0,t.indexOf(".")+i.indexOf(".")+1))}return t=t.replace(/[^\d^\.]+/g,""),t},aaa:function(e){"D_FEATURE_COLTYPE_INT"==e.fieldTypeDictCode?e.values=this.NumberCheck(e.values):e.values=e.values},GetRequest:function(e){var t=e,a=t.lastIndexOf("?");t=t.substring(a,t.length);var s=new Object;if(-1!=t.indexOf("?"))for(var i=t.substr(1),o=i.split("&"),r=0;r<o.length;r++)s[o[r].split("=")[0]]=unescape(o[r].split("=")[1]);return s},setReserveStorage:function(){var e={measureOpCode:null,partIds:null,routeName:null,yuyue:null,v_data:null};if(b["a"].get("reserveStorage")&&(e.yuyue=b["a"].get("reserveStorage").yuyue,e.measureOpCode=b["a"].get("reserveStorage").measureOpCode,e.partIds=b["a"].get("reserveStorage").partIds,e.routeName=b["a"].get("reserveStorage").routeName),null!=this.$route.query.successUrl&&void 0!=this.$route.query.successUrl){var t=decodeURIComponent(this.$route.query.successUrl);e.v_data=this.GetRequest(t),"toEmb"==this.$route.query.successUrl?(e.routeName="goodsEmbroider",e.partIds=this.$route.query.goodCodes):(-1!=t.indexOf("/goods-embroider")&&(e.routeName="goodsEmbroider"),-1!=t.indexOf("/order-settlement")&&(e.routeName="orderSettlement"),this.successUrl=decodeURIComponent(this.$route.query.successUrl))}b["a"].set("reserveStorage",e)},toggleSelected:function(e,t){for(var a=0,s=this.memberInfo[e].valueDtoList.length;a<s;a++)this.memberInfo[e].valueDtoList[a].defaultFlag=0;this.memberInfo[e].valueDtoList[t].defaultFlag=1,this.memberInfo[e].values=this.memberInfo[e].valueDtoList[t].id},muchToggleSelected:function(e,t){if(1==this.memberInfo[e].valueDtoList[t].defaultFlag){this.memberInfo[e].valueDtoList[t].defaultFlag=0;for(var a=0;a<this.memberInfo[e].valuesArr.length;a++)this.memberInfo[e].valueDtoList[t].id==this.memberInfo[e].valuesArr[a]&&this.memberInfo[e].valuesArr.splice(a,1)}else this.memberInfo[e].valueDtoList[t].defaultFlag=1,this.memberInfo[e].valuesArr.push(this.memberInfo[e].valueDtoList[t].id);this.memberInfo[e].values=this.memberInfo[e].valuesArr.join(",")},toggle:function(e){},typeLimit:function(e,t){"change"==t.type&&e.fieldLength&&(e.values=e.values.substring(0,e.fieldLength)),"D_FEATURE_COLTYPE_INT"===e.fieldTypeDictCode&&(e.values=e.values.replace(/[^0-9.]+/,"")),"change"==t.type&&e.minValue&&parseFloat(e.values)<parseFloat(e.minValue)&&(Object(r["a"])("请输入不小于"+e.minValue),e.values=""),"change"==t.type&&e.maxValue&&parseFloat(e.values)>parseFloat(e.maxValue)&&(Object(r["a"])("请输入不大于"+e.maxValue),e.values="")},typeCheck:function(e){if(e.customValue&&"D_INTEGER"===e.fieldType){var t=/^[0-9]+(.[0-9]{1,3})?$/;return t.test(e.customValue)&&e.customValue?e.maxValue&&Number(e.customValue)>Number(e.maxValue)?(Object(r["a"])(e.customName+"的最大值不能超过"+e.maxValue),void(e.customValue="")):e.minValue&&Number(e.customValue)<Number(e.minValue)?(Object(r["a"])(e.customName+"的最小值为"+e.minValue),void(e.customValue="")):void(e.customValue=Number(e.customValue)):(Object(r["a"])(e.customName+"只允许输入不超过三位小数的数字~"),e.customValue="",!1)}},getFoucs:function(){/iPhone|iPad|iPod/.test(navigator.userAgent)},checkPhone:function(){var e=this;if(!0!==this.captchaLocked)if(isPhone(this.phoneNum)){var t={ctmUsrId:b["a"].get("USER_INFO").ctmUsrId,mobile:this.phoneNum,buscontsId:baseConstant.busContsCode};p["m"].checkPhone(t).then(function(t){e.checkStatus=!0,e.getCaptcha()},function(e){Object(r["a"])("该手机号已绑定")})}else Object(r["a"])("请填写正确的手机号")},getCaptcha:function(){if(!0!==this.captchaLocked&&!1!==this.checkStatus){this.captchaLocked=!0;var e=this.phoneNum,t={mobile:e};p["m"].getCaptcha(t).then(function(e){},function(e){}),this.countDown()}},countDown:function(){var e=this;e.captchaLocked=!0,e.captchaText="验证码已发送";var t=window.setInterval(function(){e.captchaText="重新获取"+e.time+"s",e.time--<=0&&(e.time=60,e.captchaLocked=!1,e.captchaText="获取验证码",window.clearInterval(t))},1e3)},bindPhone:function(){var e=this;if(this.$emit("watchChild","我是从子组件传过来的内容！！！"),!0!==this.btnLock){if(this.btnLock=!0,!isPhone(this.phoneNum))return Object(r["a"])("请填写正确的手机号"),this.btnLock=!1,!1;if(0==this.checkStatus)return Object(r["a"])("该手机号已经被绑定了~"),this.btnLock=!1,!1;if(!this.captcha)return Object(r["a"])("请先填写验证码"),this.btnLock=!1,!1;var t={mobilePhone:this.phoneNum,registCode:this.captcha,verifyType:"D_VERIFYLOG"};p["m"].checkCaptcha(t).then(function(){var t={mobile:e.phoneNum};p["m"].bindMobile(t).then(function(){Object(r["a"])("绑定手机号成功~"),e.mobilePhoneDolag=!1,e.putUserInfo()},function(){Object(r["a"])("绑定手机出错~")})},function(e){Object(r["a"])("手机验证码错误")}).then(function(){e.btnLock=!1})}},onCancel:function(e){this[e]=!1,this.showUserSelect=!1},onSexChange:function(e,t,a){this.sexName=t},onSexConfirm:function(){this.sexName||(this.sexName=this.columns[0]),this.usersex=this.sexName.text,this.userSexCode=this.sexName.value,this.sexPickerShow=!1},onBirthday:function(e,t,a){this.birthday=e.getValues()},onBirthdayConfirm:function(){this.birthday||(this.birthday=[this.minDate.getFullYear(),("0"+parseInt(this.minDate.getMonth()+1)).slice(-2),("0"+this.minDate.getDate()).slice(-2)]),this.userbirthday=this.birthday[0]+"-"+this.birthday[1]+"-"+this.birthday[2],this.birthdayPickerShow=!1},getUserInfo:function(){var e=this,t={};p["m"].getUserInfo(t).then(function(t){e.userInfo=t,e.username=t.usrName?t.usrName:"",e.userEmail=t.email?t.email:"",t.sexCode&&t.sexName&&(e.userSexCode=t.sexCode,e.usersex=t.sexName),e.userbirthday=t.solarcalendar?t.solarcalendar:"",e.userphone=t.mobilePhone})},putUserInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,o,n,u,l,c,m,d=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$store.commit("aiMeasureBody/resetData"),{},t=[],a=!0,s=0;case 5:if(!(s<this.memberInfo.length)){e.next=21;break}if(1!=this.memberInfo[s].mustFlag){e.next=18;break}if("D_FEATURE_WRITETYPE_SELECT"!=this.memberInfo[s].inputClassDictCode||"D_FEATURE_CHOTYPE_OPEN"!=this.memberInfo[s].selectClassDictCode||"D_FEATURE_SHOWTYPE_MORE"!=this.memberInfo[s].unfoldClassDictCode){e.next=14;break}if(0!=this.memberInfo[s].valuesArr.length){e.next=12;break}return Object(r["a"])("请填写"+this.memberInfo[s].featureName),a=!1,e.abrupt("return");case 12:e.next=18;break;case 14:if(""!=this.memberInfo[s].values&&null!=this.memberInfo[s].values&&void 0!=this.memberInfo[s].values){e.next=18;break}return Object(r["a"])("请填写"+this.memberInfo[s].featureName),a=!1,e.abrupt("return");case 18:s++,e.next=5;break;case 21:if(i={},{solarCalendarStr:this.userbirthday,sexCode:this.userSexCode,email:this.userEmail,usrCode:this.username},1!=a||1!=this.s_lock){e.next=56;break}return this.s_lock=!1,e.next=27,p["m"].getUserInfo({});case 27:if(o=e.sent,null===o.mobilePhone){e.next=55;break}if("function"!==typeof this.cb){e.next=39;break}if(1!=this.chichun){e.next=35;break}this.$router.replace({name:"submitSuccess",path:"/submitSuccess",params:{billCode:this.otherBillCode,type:this.s_type}}),this.s_lock=!1,e.next=39;break;case 35:return e.next=37,this.cb();case 37:i=e.sent,this.s_lock=!1;case 39:for(n=[],u=0;u<this.memberInfo.length;u++)l={vipFeatureInfoId:"",featureCode:"",values:null},l.vipFeatureInfoId=this.memberInfo[u].id,l.featureCode=this.memberInfo[u].featureCode,"D_FEATURE_COLTYPE_INT"==this.memberInfo[u].fieldTypeDictCode?l.values=parseFloat(this.memberInfo[u].values):(l.values=this.memberInfo[u].values,this.memberInfo[u].selectClassDictCode,"D_FEATURE_CHOTYPE_OPEN"==this.memberInfo[u].selectClassDictCode&&0==this.memberInfo[u].showPicFlag&&"D_FEATURE_SHOWTYPE_MORE"==this.memberInfo[u].unfoldClassDictCode&&(l.values=this.memberInfo[u].valuesArr.join(","))),n.push(l);if(c={usrName:this.$route.params.liangti.usrName,features:n},this.$route.params.liangti&&(c.features=c.features.concat(this.$route.params.liangti.features),this.$set(c,"id",this.aiId)),"goodOrder"!=this.actionType){e.next=46;break}return this.$router.replace({name:b["a"].get("reserveStorage").routeName,params:{measureOpCode:b["a"].get("reserveStorage").measureOpCode,liangti:c,yuyue:b["a"].get("reserveStorage").yuyue},query:b["a"].get("reserveStorage").v_data}),e.abrupt("return");case 46:if(!(this.actionPage=!this.aiId)){e.next=50;break}return m={usrName:c.usrName,features:c.features},p["m"].updateAiMemberBodyInfo(m).then(function(e){e&&""!==e&&d.$router.replace({name:"aiCountBody",query:{addData:e}}),Object(r["a"])("新增成功")}),e.abrupt("return");case 50:({customs:t,saleMeasureHdId:i.id}),p["m"].updateAiMemberBodyInfo(c).then(function(e){e&&""!==e&&d.$router.push({name:"aiCountBody",query:{addData:e}}),Object(r["a"])("修改信息成功~")}),this.s_lock=!1,e.next=56;break;case 55:this.mobilePhoneDolag=!0;case 56:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateUser:function(e,t){var a=this;if(void 0!=t.saleMeasureHdId&&null!=t.saleMeasureHdId&&""!=t.saleMeasureHdId)p["m"].updateMemberBodyInfo(t).then(function(e){e&&0!==e&&a.$nextTick(function(){a.getUserInfo(),a.getMemberInfo()}),Object(r["a"])("修改信息成功~")});else{var s={billCode:this.otherBillCode,spVipCustomsSaveDto:t,usrId:b["a"].get("USER_INFO").usrId,ownCompanyId:b["a"].get("COMPANYID").company_id,companyId:b["a"].get("COMPANYID").company_id};p["m"].updateChimaInfo(s).then(function(e){e&&0!==e&&a.$nextTick(function(){a.getUserInfo(),a.getMemberInfo()}),Object(r["a"])("修改信息成功~")})}},getMemberInfo:function(){var e=this,t={partCodes:b["a"].get("toReserveParams").goodCodes};this.aiId=this.$route.params.aiId,p["m"].getAiMemberInfo(t).then(function(t){t.length;var a=[];if("aiCountBody"==e.$route.params.fromPage){for(var s in e.confirm="保存",t)for(var i=0;i<e.$route.params.data.length;i++)if(t[s].id==e.$route.params.data[i].id&&"D_FEATURE_TYPE_BODY"==t[s].featureTypeDictCode&&1===t[s].showFlag){if(e.$set(t[s],"values",""),e.$set(t[s],"value",""),e.$set(t[s],"valuemName",""),e.$set(t[s],"valuesArr",[]),"D_FEATURE_CHOTYPE_OPEN"===t[s].selectClassDictCode){if(!e.$route.params.data[i].valueIds&&t[s].valueDtoList)for(var o=0;o<t[s].valueDtoList.length;o++)1==t[s].valueDtoList[o].defaultFlag&&(t[s].valuesArr.push(t[s].valueDtoList[o].id),t[s].values=t[s].valueDtoList[o].id,t[s].valuemName=t[s].valueDtoList[o].valuemName);if(e.$route.params.data[i].valueIds){if("D_FEATURE_SHOWTYPE_ONE"==t[s].unfoldClassDictCode&&(t[s].values=Number(e.$route.params.data[i].valueIds),1===t[s].showPicFlag))for(var r=0;r<t[s].valueDtoList.length;r++)t[s].valueDtoList[r].id==e.$route.params.data[i].valueIds?t[s].valueDtoList[r].defaultFlag=1:t[s].valueDtoList[r].defaultFlag=0;if("D_FEATURE_SHOWTYPE_MORE"==t[s].unfoldClassDictCode){var n=e.$route.params.data[i].valueIds.split(",");if(n.forEach(function(e,t){n[t]=Number(e)}),t[s].valuesArr=n,t[s].values=e.$route.params.data[i].valueIds,1===t[s].showPicFlag)for(r=0;r<t[s].valueDtoList.length;r++)if(n.length>0)for(var u=0;u<n.length;u++){if(t[s].valueDtoList[r].id==n[u]){t[s].valueDtoList[r].defaultFlag=1;break}t[s].valueDtoList[r].defaultFlag=0}}}}else t[s].values=e.$route.params.data[i].values,t[s].valuemName=e.$route.params.data[i].values;a.push(t[s])}return a=e.bubbleSort(a),void(e.memberInfo=a)}for(var l in t)if("D_FEATURE_TYPE_BODY"===t[l].featureTypeDictCode&&1===t[l].showFlag){if(e.$set(t[l],"valuesArr",[]),e.$set(t[l],"values",""),e.$set(t[l],"valuemName",""),("D_FEATURE_CHOTYPE_OPEN"==t[l].selectClassDictCode||"D_FEATURE_CHOTYPE_DOWN"==t[l].selectClassDictCode)&&t[l].valueDtoList)for(o=0;o<t[l].valueDtoList.length;o++)1==t[l].valueDtoList[o].defaultFlag&&(t[l].valuesArr.push(t[l].valueDtoList[o].id),t[l].values=t[l].valueDtoList[o].id,t[l].valuemName=t[l].valueDtoList[o].valuemName);a.push(t[l])}0==t.length&&e.$router.replace({name:b["a"].get("reserveStorage").routeName,params:{measureOpCode:b["a"].get("reserveStorage").measureOpCode,liangti:"",yuyue:b["a"].get("reserveStorage").yuyue},query:b["a"].get("reserveStorage").b_data}),a=e.bubbleSort(a),e.memberInfo=a})},changeMember:function(e){var t=this;this.memberInfo.forEach(function(a){a.id===t.memberType&&a.id==t.currentId&&(a.valuemName=e.text,a.values=e.value)}),this.showMemberSelect=!1,this.changeMemberInfo=[]},cancelMemberInfo:function(){this.showMemberSelect=!1,this.changeMemberInfo=[]},showPopup:function(e){var t=this;this.changeMemberInfo=[];var a={};this.memberType=e.id,this.currentId=e.id,e.valueDtoList.forEach(function(e){a.value=e.id,a.text=e.valuemName,t.changeMemberInfo.push(a),a={}}),this.showMemberSelect=!0},setPageParams:function(){if(this.$route.query){var e=!1;for(var t in this.$route.query)t&&(e=!0);if(e){var a=this.$store.state.aiMeasureBody.bodyParams;a.query=this.$route.query,this.$store.commit("aiMeasureBody/setData",{storeKey:"bodyParams",storeValue:a})}}if(this.$route.params){var s=!1;for(var i in this.$route.params)i&&(s=!0);if(s){var o=this.$store.state.aiMeasureBody.bodyParams;o.params=this.$route.params,this.$store.commit("aiMeasureBody/setData",{storeKey:"bodyParams",storeValue:o})}}},setFormValue:function(){var e=this,t=this.$store.state.aiMeasureBody.bodyFormData;!t||t.length<0?this.$store.commit("aiMeasureBody/setData",{storeKey:"bodyFormData",storeValue:this.memberInfo}):function(){var a={};t.forEach(function(e){a[e.id]=e});var s=function(t){e.memberInfo.forEach(function(e){if(e.id==t)return e.value=a[t].value,e.valuemName=a[t].valuemName,e.values=a[t].values,void(e.valuesArr=a[t].valuesArr)})};for(var i in a)s(i)}()},setStoreInfo:function(){this.$store.commit("aiMeasureBody/setData",{storeKey:"bodyFormData",storeValue:this.memberInfo})}},created:function(){this.setPageParams(),"newAdd"==this.$route.params.actionPage&&(this.actionPage="newAdd"),"goodOrder"==this.$route.params.fromType&&(this.actionType="goodOrder"),this.getUserInfo(),this.getMemberInfo()},beforeRouteLeave:function(e,t,a){this.setStoreInfo(),a()}},C=g,_=(a("e5ca"),a("2877")),D=Object(_["a"])(C,s,i,!1,null,"e4235c50",null);D.options.__file="bodyFeature.vue";t["default"]=D.exports},"417e":function(e,t,a){"use strict";var s=a("fe7e"),i=a("f331");t["a"]=Object(s["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.b()},[a("div",{class:[e.b("icon",[e.shape,{disabled:e.isDisabled,checked:e.checked}])],on:{click:e.toggle}},[e._t("icon",[a("icon",{attrs:{name:"success"}})],{checked:e.checked})],2),e.$slots.default?a("span",{class:e.b("label",e.labelPosition),on:{click:function(t){e.toggle("label")}}},[e._t("default")],2):e._e()])},name:"checkbox",mixins:[i["a"]],props:{name:null,value:null,disabled:Boolean,labelPosition:String,labelDisabled:{type:Boolean,default:!1},shape:{type:String,default:"round"}},computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(e){var t=this.parent;if(t){var a=this.parent.value.slice();if(e){if(t.max&&a.length>=t.max)return;-1===a.indexOf(this.name)&&(a.push(this.name),t.$emit("input",a))}else{var s=a.indexOf(this.name);-1!==s&&(a.splice(s,1),t.$emit("input",a))}}else this.$emit("input",e)}},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled}},watch:{value:function(e){this.$emit("change",e)}},created:function(){this.findParent("van-checkbox-group")},methods:{toggle:function(e){this.isDisabled||"label"===e&&this.labelDisabled||(this.checked=!this.checked)}}})},8156:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAB9UlEQVRIS+2WMWgTYRiG3/fSktrSQXO56yI4qOAeKDSJUJC6KDoo4iA6dHESRAcRIaCDiEsHu7m0iooWQVxCXWxCNgcXB0HE8f8VWgcr6cG9cpWES5qKiWlSJDd+9//f83/v9353P9Gnh33iYveB34yPp0ZGR58DmK6rIn3kxsZMdm3tS1ypSjp9MHScZQAHanFJxT1BcC6zuvq9laotKy657mHHcV6LPNS8ScA3SrdGguDJzzB0kEyeJ3kHwN4WgA/DwIlJYz43v9sCLrvuNBKJFwD2daP/Ar4mpNNT1lbi+RrAZdedhePMgxzuBrQuO1CVNHvU2ke12Ca4ADjHPO8uyGvAjhlOkG7nrC0AEIu+PzYmPQZ5qptV/iHXs8CYSyz7fhHATI+gvzHSywj8CsDJXoIFPOXKxESa0jsC+3sE/xRUq5lNc5VSqUkODb0FkNxh+Lqkqby17+vjtOJ5lx1yPvblWSR5BECmo8NIyyDXAdRNK+li3tqFKF/DHJd8/yGlCyKv542ZK3teCWSuQ/BS1tqzFd+/GUoFkA/yxlxpmON44mi8jhvzI4r9Kzhn7ZkoTzzntuD4IboF/uufRG3hANyWyaSlWo8HUm+Z42ZJBub6/81V8rz7JK+2fR2SQgI3stbe206l3Xehb6ufHSzuW8W/AMn26QsfcJpnAAAAAElFTkSuQmCC"},a909:function(e,t,a){"use strict";a("5548")},c69b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABQUlEQVRIS7XVPY6CQBQH8P+I1RZbKdq7wSN4DUKihSZexAJjNEYlfgQ1eAXvsYVXsFgVVgvLbbYyGsdoBIeRr6GhIHm/eX8eD/Ity/qZkCYEXeRaVyRCAZHIAxCFuIAkkM9SCX+r1eONvgBxkFythsJggINlYdtqUYQJ8BCSTiOraTgul665kysVfI3HIKkUtp0O9qbJB/wQxbKQVVU4kwnsbpcWyWgaFNMEkSTY/T6c4ZAf0fPRvCOcUVUos9mtmGHgf72GMp/j2pkzGsHu9Vyd+UbEQ+Ry+RaHJOF8OtH773SKXbv98rkGAlhx5apVFAyDZn5YLLDRdeYuCAywkHy9jo9iET+Nhu+iCQVEGeHQQFgkEhAGiQwERWIBQZDYwDskEYC7u3wHOMID1p8xsQ7u5/EiiQPeuIQAz4gw4I5cAHN0gTAtv1tGAAAAAElFTkSuQmCC"},dae9:function(e,t,a){},e5ca:function(e,t,a){"use strict";var s=a("3867"),i=a.n(s);i.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1761df8c"],{"39d1":function(e,t,o){"use strict";var s=o("fe7e");t["a"]=Object(s["a"])({render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.b(),on:{touchmove:e.onTouchMove}},e._l(e.list,function(t,s){return o("svg",{class:e.b("item"),style:e.style,attrs:{fill:e.disabled?e.disabledColor:t?e.color:e.voidColor,viewBox:"0 0 32 32","data-index":s},on:{click:function(t){e.onSelect(s)}}},[o("path",{attrs:{d:t?"M32 12.408l-11.056-1.607-4.944-10.018-4.944 10.018-11.056 1.607 8 7.798-1.889 11.011 9.889-5.199 9.889 5.199-1.889-11.011 8-7.798z":"M32 12.408l-11.056-1.607-4.944-10.018-4.944 10.018-11.056 1.607 8 7.798-1.889 11.011 9.889-5.199 9.889 5.199-1.889-11.011 8-7.798zM16 23.547l-6.983 3.671 1.334-7.776-5.65-5.507 7.808-1.134 3.492-7.075 3.492 7.075 7.807 1.134-5.65 5.507 1.334 7.776-6.983-3.671z"}})])}))},name:"rate",props:{readonly:Boolean,disabled:Boolean,size:{type:Number,default:20},color:{type:String,default:"#ffd21e"},voidColor:{type:String,default:"#c7c7c7"},disabledColor:{type:String,default:"#bdbdbd"},count:{type:Number,default:5},value:{type:Number,default:0}},computed:{style:function(){return{width:this.size+"px"}},list:function(){var e=this;return Array.apply(null,{length:this.count}).map(function(t,o){return o<e.value})}},methods:{onSelect:function(e){this.disabled||this.readonly||(this.$emit("input",e+1),this.$emit("change",e+1))},onTouchMove:function(e){if(document.elementFromPoint){e.preventDefault();var t=e.touches[0],o=t.clientX,s=t.clientY,a=document.elementFromPoint(o,s);if(a&&a.dataset){var i=a.dataset.index;i&&this.onSelect(+i)}}}}})},4142:function(e,t,o){"use strict";o("5548"),o("a085")},"45b6":function(e,t,o){"use strict";var s=o("5187"),a=o.n(s);a.a},5187:function(e,t,o){},"69cb":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"flex-vbox  wh100 bg-gray "},[o("div",{staticClass:"flex-auto  overflow-scroll "},e._l(e.goodsList,function(t,s){return o("div",{key:s,staticClass:"pd30 mgB30 bg-white"},[o("div",{staticClass:"flex-box"},[o("div",{staticClass:"imgBox",class:{cusTag:1===t.orderFlag}},[o("img",{attrs:{src:e.getImg(t.thumb),onerror:"errImg(event)"}})]),o("div",{staticClass:"mgL30 "},[o("div",{staticClass:"mgB10"},[o("div",{staticClass:"pdL10 fs28B mgB10"},[e._v("商品评价")]),o("div",{staticClass:"flex-box"},[o("van-rate",{attrs:{size:20,count:5,color:"#D5AF6E","void-color":"#ccc"},model:{value:t.commentScore,callback:function(o){e.$set(t,"commentScore",o)},expression:"item.commentScore"}}),o("span",{staticClass:"fs28"},[e._v("  "+e._s(e.commentScoreDesc[t.commentScore]))])],1)]),1==t.orderFlag?o("div",[o("div",{staticClass:"pdL10 fs28B mgB10"},[e._v("着装师评价")]),o("div",{staticClass:"flex-box"},[o("van-rate",{attrs:{size:20,count:5,color:"#D5AF6E","void-color":"#ccc"},model:{value:t.msrCommentScore,callback:function(o){e.$set(t,"msrCommentScore",o)},expression:"item.msrCommentScore"}}),o("span",{staticClass:"fs28"},[e._v("  "+e._s(e.msrCommentScoreDesc[t.msrCommentScore]))])],1)]):e._e()])]),o("div",{staticClass:"w100 mgT30 textarea"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reasonMemo,expression:"item.reasonMemo"}],attrs:{id:"",cols:"200",maxlength:"150",placeholder:"商品满足您的期待吗？说说您的体验"},domProps:{value:t.reasonMemo},on:{input:function(o){o.target.composing||e.$set(t,"reasonMemo",o.target.value)}}}),o("div",{staticClass:"flex-end"},[e._v(e._s(t.reasonMemo?t.reasonMemo.length:0)+"/150")])]),o("upload-file",{attrs:{good:t,images:e.goodsList[s].commentPictList},on:{"update:images":function(t){e.$set(e.goodsList[s],"commentPictList",t)}}})],1)})),e.goodsList.length>0?o("button",{staticClass:"btn-submit",on:{click:e.submitEvaluate}},[e._v("提交")]):e._e()])},a=[],i=(o("ac6a"),o("a481"),o("e7e5"),o("d399")),n=(o("4142"),o("39d1")),r=o("2b61"),c=o("22ce"),l=o("b17f"),d={name:"order-evaluate",data:function(){return{goodsList:[],commentScoreDesc:["","不合体","不合体","基本合体","合体","非常合体"],msrCommentScoreDesc:["","不满意","不满意","一般","满意","非常满意"]}},components:{"van-rate":n["a"],uploadFile:l["a"]},methods:{getGoodsInfo:function(){var e=this,t=r["a"].get("COMPANYID").company_id,o={busContsCode:baseConstant.busContsCode,usrId:"",companyId:t,ownCompanyId:t,billCode:this.$route.query.billCode};c["h"].getDetailInfo(o).then(function(t){console.log(t),e.goodsList=e.getGoodsList(t.data.packages),console.log(e.goodsList)})},submitEvaluate:function(){var e=this,t=r["a"].get("COMPANYID").company_id,o=r["a"].get("USER_INFO"),s={companyId:t,usrId:o.usrId,model:{anonymousFlag:0,billCode:this.$route.query.billCode,buscontsCode:baseConstant.busContsCode,shopCode:o.shopCode,usrId:o.usrId}},a=this.getEvaluate();1!=a.flag?2!=a.flag?(s.model.goodsCommentList=a.goodsCommentList,c["h"].ordComment(s).then(function(t){console.log("评价完成",t),e.$router.replace({name:"orderList",path:"/orderList"})})):Object(i["a"])("量体师评分是必填项哦~"):Object(i["a"])("商品评分是必填项哦~")},getEvaluate:function(){var e=[],t=0;return this.goodsList.forEach(function(o,s){e.push({commentMemo:o.reasonMemo,commentScore:o.commentScore,commentTypeCode:"D_MASPART",goodsCode:o.goodsCode,rtlOrdDtId:o.saleOrdDtId,commentPictList:o.commentPictList}),o.commentScore||(t=1),1==o.orderFlag&&(e[s].msrCommentScore=o.msrCommentScore,o.msrCommentScore||(t=2))}),{flag:t,goodsCommentList:e}},getGoodsList:function(e){var t=[];return e.forEach(function(e){t=t.concat(e.data.goodsList)}),t}},created:function(){},mounted:function(){this.getGoodsInfo()}},u=d,m=(o("45b6"),o("2877")),f=Object(m["a"])(u,s,a,!1,null,"f345066c",null);f.options.__file="order-evaluate.vue";t["default"]=f.exports},a085:function(e,t,o){},a8d8:function(e,t,o){},b17f:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[e._m(0),o("div",{staticClass:"img-group"},[e.isBeyongLimit?o("van-uploader",{staticClass:"img-box border-dash flex-center",attrs:{"after-read":e.onRead,disabled:e.isDisabled}},[o("div",{staticClass:"flex-center w100 h100"},[o("span",[e._v("+")])])]):e._e(),e._l(e.imgs,function(t,s){return o("div",{key:s,staticClass:"img-box box-border"},[o("div",{staticClass:"icon-box",on:{click:function(t){e.delImg(s)}}},[e._v("X")]),o("img",{attrs:{src:t.content,alt:""}})])})],2)])},a=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"group"},[o("div",{staticClass:"upload"},[e._v("上传图片\n      "),o("span",{staticClass:"limit"},[e._v("支持最多上传5张,每张最大2M")])])])}],i=(o("7f7f"),o("5548"),o("a8d8"),o("fe7e")),n=Object(i["a"])({render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.b()},[e._t("default"),o("input",e._b({ref:"input",class:e.b("input"),attrs:{type:"file",accept:e.accept,disabled:e.disabled},on:{change:e.onChange}},"input",e.$attrs,!1))],2)},name:"uploader",inheritAttrs:!1,props:{disabled:Boolean,beforeRead:Function,afterRead:Function,accept:{type:String,default:"image/*"},resultType:{type:String,default:"dataUrl"},maxSize:{type:Number,default:Number.MAX_VALUE}},methods:{onChange:function(e){var t=this,o=e.target.files;!this.disabled&&o.length&&(o=1===o.length?o[0]:[].slice.call(o,0),!o||this.beforeRead&&!this.beforeRead(o)||(Array.isArray(o)?Promise.all(o.map(this.readFile)).then(function(e){var s=!1,a=o.map(function(a,i){return a.size>t.maxSize&&(s=!0),{file:o[i],content:e[i]}});t.onAfterRead(a,s)}):this.readFile(o).then(function(e){t.onAfterRead({file:o,content:e},o.size>t.maxSize)})))},readFile:function(e){var t=this;return new Promise(function(o){var s=new FileReader;s.onload=function(e){o(e.target.result)},"dataUrl"===t.resultType?s.readAsDataURL(e):"text"===t.resultType&&s.readAsText(e)})},onAfterRead:function(e,t){t?this.$emit("oversize",e):(this.afterRead&&this.afterRead(e),this.$refs.input&&(this.$refs.input.value=""))}}}),r=(o("2b61"),{name:"upload-file",props:{good:{commentPictList:[],images:[]}},components:{"van-uploader":n},data:function(){return{imgs:[],images:[],isDisabled:!1}},methods:{onRead:function(e){var t=this;this.isDisabled=!0,uploadImg(e.file).then(function(o){console.log(o);var s=o.uploadDetail.successDetail;t.images.push({fileLength:s.fileSize,md5:s.md5,pictPath:s.filePath,sourceFileName:e.file.name,pictClass:"D_COMMENTPICT"}),t.imgs.push(e),t.$emit("update:images",t.images),t.imgs.length>=5?t.isDisabled=!0:t.isDisabled=!1})},delImg:function(e){this.imgs.splice(e,1),this.images.splice(e,1),this.isDisabled=!1}},computed:{isBeyongLimit:function(){return 5!=this.imgs.length}}}),c=r,l=(o("d984"),o("2877")),d=Object(l["a"])(c,s,a,!1,null,"171eafd0",null);d.options.__file="uploadFile.vue";t["a"]=d.exports},beb8:function(e,t,o){},d984:function(e,t,o){"use strict";var s=o("beb8"),a=o.n(s);a.a}}]);
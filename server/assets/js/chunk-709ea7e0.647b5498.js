(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-709ea7e0"],{"0416":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAFZklEQVRIS+1WaWxUVRT+znszXahIGTrvlrolkGDEIP5gkc60BRUVg/DDSFgCrYIUiQgWJaCyWKFha8QIKPsikkjigiRE1NCU6QBiggIuGDWihjL3zkxZClTaee+Y+/qKBToaE9E/3n8z793znfOd73znEQDUCTGCgTUE5Ovf//RhIEZAeVjKD0kHjwhx6nqBtUs+Fpay+38DGBVipAO8eb2q1JQawJSQlDvdCtMdBoyoELPAXAkiP5i/MGx7bGEyefyIEDnnmKuJaDIAAnPEJiotkfInHS8qxL020bHiWCzePn5awIOBwM0pv38rgCEEOA7zioBSc+4EmvdZVsgAtoCoJ4DfHOZ5RUpV6/dqOnfO82dnrwfRSADvhKUc/ZeA+yzrUYNoLYAAmLWgykJKfbwbyOxsWZUEzASRqSsmogkhKb9y1W5ZQwFsBlEBgNMG85hCpfakBdwjRE4OsALARJcmYJdDNFHTEg0G72bD0BX3AXOKiBZnSlnZD2jRiXSxrCoQzdBtYKA2s6Vl/ICGhl+vbtdlSiNC9CDm3SC6HUATMT8XUmr1DsDsLsRsAuYByADzd0xUWiTlZzrYvkCgt+HzbQdRXzC3gGh+SMolmt6OtNEecDIBawAcBdHYcCz2dSQvrxeZ5hYA93gBVjaY5pxH6usvusKwrKlMtBxANjN/b9v2uMHJ5OfebA8kYK7B/Hp7Wi8D1gA+nxCDG6WMDAOaI0I8bQCLAXQC8AsBj4ek3Osp0AKwgYHhABjAxgvA9AelvLADyCgQYj6YZ4HIB+blYaWeb6v2GpXWBgK3GH7/JgLuc4Mxb21qaZk+9PTps64wgsFhMIyNaLXBBod5crFS77pVWVZfalWvptcmouVnpZz/MHCpQ8CIEGOJeTWIugBQDnN5sVIf6JdrgCyfELo30zxB7TVSqQmFyeRJBsy6dn3W9DpAWYlS+9OKxpP8BSIymfl9NozytqGtFaKPCbztKhRoBvNLnypVvQBwDnTrdofj821mYACYHRCtyjLN2f3q6y9GLatns1I/DwFSHVYYDQbLGLgYjsd3eC9QRAhdka4sC8Bx07bHDUokDi8AjKGWNYOJFmrRADgBoifCsVhNTW5urj8j4zUQjWdgaZGUs9P2sO3BQcsSKWATiIZ5wlibZZoVOnNvhPSAF3nPNsC2K8KJRKPbY6J1ILoJgFbzGL2W/hQwkpc3nExzAwCLgYQBTNLGq3tXZ1nlIFoG4AYw14P5yXA8vvtgIHBjyu+vbjMNZo6azGWF8fgPaZ1mP5DtWNYyEE31DPkTx3FKixOJU1q9ps+nPfIBL8D2801N0x46d64hIsT9BKwHcJs2DWaeG1bq1Y6G/4qxqBPiEID+rGXM/IJ3id3eEq1oUy+Ynwor9Z63MZYR0RSdIAOHnFSqrCSZ/NZN0O+vcGz7reJE4nCHlNYJoWWcw8wTipQ64vax1cRH6AtavQaR3msqGgwWs2FsAtBDJ0jAy/VSLh0F2FEhRjOwGkBXACvDUmrhuSftetofDD7mGIa+lKedn5ifCSm1bVdBQadc264i5mkgMpj5sENUViLlMU+dq7Q1utGZd/qbmiYObGxMpgXUlzIyM99goHWPMX9k2PYkPeC1llVotiq3lzZqBhZ9o1RVOdBSl58/BMybAdzKwHkCng1Lqft6xbmmwogQLxKwEMyNDtHMYinXaZfxW1YlgApvDx4l5tJQPP6lZxiLNICuGMABYh4fUurHq8E6pLSua9dbnYyMKf5Ll9YOOnPmRDQ/vz+3Zt7b24NLTkpZOQpo1g5kMG8jorvc1QS8ElKqigC7I7DLgP9/l6aj52/+/8eH8L/5Xfo7X3mTO4nEiBMAAAAASUVORK5CYII="},3363:function(t,e,i){},"4ac4":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAACyUlEQVRIS+2Wz29NURDHv99z+7S6YNN7TppUJYiFCEJEePcViQ1bwkbqR8SOBRvCRpAS4i8g1fgRxJYmEhHeVeJHIhIkqvFzc861YaGSvndG7lNNy31Pi9eV2dzFmZlPvnNnJsM4DCOS3ULOBkDUx4QiAyKyjbHW/SDn1IfzS9ZXjI3xdVT2M1FSoEySugrmP3B81RY5KWQ/gZ0AltQK+hclfTdk7ezVQOmu1uuFvFpv4P7I2mO3gCYApZwxAwDaq0GrKxS5AbIXQBe+J8uywaEvX9oblCqzqelQZO3u2Jh9wzGZAdWA4kUWdTj3tKh1D8nOrGgBugvWbi9qvYfkYfn6ta3kfZBrbn4HYGpWTCZQgNsFa1fd0XqB8n4KguBhVnDZ+8UdSfKkT+uXQs6hyN68c6fuGnNGgO3jBlJkQ1mp98r7E5FzK2Nj+gAsH5NAJI6cK8RhuBZKXa8MtcirFc7NvROGiwKlHmdtsCyFla7LaX0aZGcZWJgD5nvg4hig95uiJLkSG3MNwLqRN+/XRUnSG2tdBBn9rDILWOm6otadIJuU9w8ak+TZoNZvSbamCUTkw3PnZs0A1DStu0iqUYnv5629FIfhRih1+XfA713X2DgT5KwfziWgN0fuAXmoUjrgYN7ao7Xm7RbQ0KD1a5Jto/3GKEy77qa1O9YY0w9gBAjvdw0BV3NKvUkFEpiprf1kjSkCaP5Fhffn8klyvGjMAQJHqgLTrguAViiV/pcRE+BFwdp5sdbnBSgXnNuSlpxkTxWV7rO17dONmS7A29FzPPHVVi4vjT5+fFQ05j6BZVXLKrI5cu5CrPVZkFt++E0UeC+ydsW9lpbF5SBI274GT/oKzuWLLS1LGASP/gwoUgI5BJEGkLlawOG3weFvuhor99JEFY6DUdvlP/CvS5i1aSb5TJz0QzgMI5DpcKanfv1MZAAiW78BrYM8sDcGV4kAAAAASUVORK5CYII="},"7d47":function(t,e,i){"use strict";var s=i("cbf0"),a=i.n(s);a.a},"8a12":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},a=[],o=(i("e7e5"),i("d399")),n=i("22ce"),r={data:function(){return{}},created:function(){this.ms_tabList=[{id:1,title:"中英文绣字",type:"D_EMBTYPE_FONT"},{id:2,title:"星座刺绣",type:"D_EMBTYPE_EMBPIC"}],this.ms_tabListLength=this.ms_tabList.length,this.ms_goodsType=this.$route.query.goodsType},methods:{ms_getUseablePart:function(t,e){var i={type:t.type,ptiPartHdId:this.goodDetail.ptiPartHdId};return n["e"].getUseablePart(i)},ms_checkoutGoodSell:function(t){var e=this,i=(this.$route.query.goodsType,{buscontsCode:baseConstant.busContsCode});return"groupGoods"===this.ms_goodsType?i.combGoodsCodeList=this.groupGoodDetail.ptiCombgoodHdCode:i.partGoodsCodeList=this.goodDetail.goodCode,t&&(1==this.buyType||3==this.buyType?(i.partGoodsCodeList=this.goodDetail.goodCode,delete i.combGoodsCodeList):(i.combGoodsCodeList=this.groupGoodDetail.ptiCombgoodHdCode,delete i.partGoodsCodeList)),n["e"].getGoodSellState(i).then(function(t){t.combGoodsList&&t.combGoodsList.length?0==t.combGoodsList[0].sellFlag?(e.ms_isUnSell=!0,Object(o["a"])("该商品已下架")):e.ms_isUnSell=!1:0==t.partGoodsList[0].sellFlag?(e.ms_isUnSell=!0,Object(o["a"])("该商品已下架")):e.ms_isUnSell=!1})}}},l=r,c=i("2877"),d=Object(c["a"])(l,s,a,!1,null,null,null);d.options.__file="ComGoodEmbData.vue";e["a"]=d.exports},"8faa":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:this.hasUseablePart,expression:"this.hasUseablePart"}],staticClass:"model-cont"},[t._m(0),s("ul",{staticClass:"part-list"},t._l(t.allUseablePart,function(e,a){return s("li",{key:e.id,class:["part-item","fs28","flex-vbox"],on:{click:function(i){t.selectPart(e,a)}}},[s("div",{class:["part-img",{"selected-success":a==t.partIndex}]},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(e.gblFileUrl),expression:"getImg(item.gblFileUrl)"}],staticClass:"main-img"}),s("img",{staticClass:"icon-selected-right",attrs:{src:i("bb68"),alt:""}})]),s("div",{staticClass:"item-title"},[t._v(t._s(e.regionClassName))])])}))]),s("div",{directives:[{name:"show",rawName:"v-show",value:this.hasUseablePart,expression:"this.hasUseablePart"}],staticClass:"dom-cut"}),s("div",{directives:[{name:"show",rawName:"v-show",value:this.hasUseablePart,expression:"this.hasUseablePart"}],staticClass:"emb"},[s("div",{staticClass:"model-cont"},[t._m(1),s("ul",{staticClass:"flex-box tab pdR30"},t._l(t.tabList,function(e,i){return s("li",{directives:[{name:"show",rawName:"v-show",value:"all"==t.activePartItem.custLevel||1==e.id&&"emb"==t.activePartItem.custLevel||2==e.id&&"ept"==t.activePartItem.custLevel,expression:"activePartItem.custLevel=='all' || (item.id==1&&activePartItem.custLevel=='emb') || (item.id==2&&activePartItem.custLevel=='ept')"}],key:e.id,class:["fs30","nav",{selected:t.tabIndex==i}],on:{click:function(s){t.switchNav(e,i)}}},[t._v(t._s(e.title))])}))]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.activeNavId,expression:"activeNavId == 1"}]},[s("div",[s("div",{staticClass:"model-cont pdTb30"},[s("div",{staticClass:"pdR30"},[s("van-field",{staticClass:"font-input",attrs:{clearable:"",placeholder:"最多输入4个全中文或8个全英文","error-message":t.fontErrTip},on:{focus:t.inputFocus,blur:t.resetPage},model:{value:t.fontVal,callback:function(e){t.fontVal=e},expression:"fontVal"}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.activeNavId,expression:"activeNavId == 1"}],staticClass:"dom-cut"}),s("div",{staticClass:"model-cont"},[t._m(2),s("div",{staticClass:"font-container"},[s("ul",{staticClass:"part-list"},t._l(t.colorFontList.fontList,function(e,a){return s("li",{key:e.id,class:["part-item","flex-vbox"],on:{click:function(e){t.fontIndex=a}}},[s("div",{class:["part-img","part-font-img",{"selected-success":a==t.fontIndex}]},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(e.picFileUrl),expression:"getImg(item.picFileUrl)"}],staticClass:"main-img"}),s("img",{staticClass:"icon-selected-right",attrs:{src:i("bb68"),alt:""}})]),s("div",{staticClass:"item-title"},[t._v(t._s(e.ictEmbFontsHdName))])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.colorFontList.fontList||!t.colorFontList.fontList.length,expression:"!colorFontList.fontList || !colorFontList.fontList.length"}],staticClass:"null-list"},[t._v("暂无刺绣字体")])])])])]),2==t.activeNavId?s("div",{staticClass:"pd30"},[s("swiper",{ref:"swiperRef",on:{onSwiper:t.onSwiper}},t._l(t.picListPages,function(e,a){return a<t.picListPages?s("div",{key:a,staticClass:"model-cont model-cont-ept-img"},[s("div",[s("ul",{staticClass:"part-list star-list"},t._l(t.picList,function(e,o){return s("li",{key:a+o,class:["part-item","fs28","flex-vbox","ept-list"],on:{click:function(i){t.switchEptPic(e,o)}}},[s("div",{class:["part-img","part-img-star",{"selected-success":o==t.picIndex}]},[t.pageNum==a+1&&t.showRealPicFlag?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(e.imageUrl),expression:"getImg(item.imageUrl)"}],staticClass:"main-img"}):s("img",{staticClass:"main-img",attrs:{src:i("abbc")}}),s("img",{staticClass:"icon-selected-right",attrs:{src:i("bb68"),alt:""}})]),s("div",{staticClass:"item-title"},[t._v(t._s(e.embPrintName))])])}))])]):t._e()})),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.picListPages>1,expression:"picListPages>1"}],staticClass:"indicator-list flex-center"},t._l(t.picListPages,function(e,i){return s("li",{key:i,class:["indicator-item",{selected:t.pageNum==i+1}]})})),s("div",{directives:[{name:"show",rawName:"v-show",value:t.picListPages<=0,expression:"picListPages <= 0"}],staticClass:"null-list"},[t._v("暂无刺绣图片")])],1):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:this.hasUseablePart&&(1==t.activeNavId||2==t.activeNavId&&t.picIndex>=0),expression:"this.hasUseablePart && (activeNavId==1 || (activeNavId==2 && picIndex>=0))"}],staticClass:"dom-cut"}),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.activeNavId||2==t.activeNavId&&t.picIndex>=0,expression:"activeNavId==1 || (activeNavId==2 && picIndex>=0)"}],staticClass:"model-cont"},[t._m(3),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.activeNavId,expression:"activeNavId == 1"}]},[s("ul",{staticClass:"part-list color-list"},t._l(t.colorFontList.colorList,function(e,a){return s("li",{key:e.id,class:["part-item","flex-vbox"],on:{click:function(e){t.colorIndex=a}}},[s("div",{class:["part-img","part-img-color",{"selected-success":a==t.colorIndex}]},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(e.picFileUrl),expression:"getImg(item.picFileUrl)"}],staticClass:"main-img"}),s("img",{staticClass:"icon-selected-right",attrs:{src:i("bb68"),alt:""}})]),s("div",{staticClass:"item-title"},[t._v(t._s(e.ictEmbColorsHdName))])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.colorFontList.colorList||!t.colorFontList.colorList.length,expression:"!colorFontList.colorList || !colorFontList.colorList.length"}],staticClass:"null-list"},[t._v("暂无刺绣颜色")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.activeNavId,expression:"activeNavId == 2"}]},[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.eptColors.length,expression:"eptColors.length"}],staticClass:"part-list color-list"},t._l(t.eptColors,function(e,a){return s("li",{key:e.id,class:["part-item","flex-vbox"],on:{click:function(e){t.eptColorIndex=a}}},[s("div",{class:["part-img","part-img-color",{"selected-success":a==t.eptColorIndex}]},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(e.fileUrl),expression:"getImg(item.fileUrl)"}],staticClass:"main-img"}),s("img",{staticClass:"icon-selected-right",attrs:{src:i("bb68"),alt:""}})]),s("div",{staticClass:"item-title"},[t._v(t._s(e.colorName))])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.eptColors.length,expression:"!eptColors.length"}],staticClass:"null-list"},[t._v("暂无刺绣颜色")])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasUseablePart,expression:"!hasUseablePart"}],staticClass:"no-useable-part fs26"},[t._v(t._s(0==t.callGetUseablePartNum?"暂无可个性定制部位":"加载中.."))]),s("div",{staticClass:"foot-btn"},[t.hasUseablePart&&t.embOrEptPrice?s("p",{staticClass:"cust-tip"},[s("span",{staticClass:"cust-tip-logo"},[t._v("提示")]),s("span",{staticClass:"cust-tip-cont"},[t._v("\n                选择(确定刺绣)会收取"+t._s(t.embOrEptPrice)+"元的刺绣费喔！\n            ")])]):t._e(),s("div",{staticClass:"foot-btn-item fs30 not-btn",on:{click:t.checkoutCanBuy}},[t._v("不刺绣")]),s("div",{staticClass:"foot-btn-item fs30 sure-btn",on:{click:function(e){t.checkoutCanBuy("design")}}},[t._v("确定刺绣")])]),s("div",{staticClass:"bottom-btn-height"}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"com-shade-style"},[s("div",{staticClass:"com-loading-style"},[s("van-loading",{attrs:{type:"spinner",color:"white"}})],1)])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title fs30B pdTb30"},[s("img",{staticClass:"title-logo",attrs:{src:i("e81d5")}}),t._v("\n            选择刺绣部位\n        ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title fs30B pdTb30"},[s("img",{staticClass:"title-logo",attrs:{src:i("0416")}}),t._v("\n                选择刺绣内容\n            ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title fs30B pdTb30"},[s("img",{staticClass:"title-logo",attrs:{src:i("4ac4")}}),t._v("\n                        选择刺绣字体\n                    ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title fs30B pdTb30"},[s("img",{staticClass:"title-logo",attrs:{src:i("a1e8")}}),t._v("\n                选择刺绣颜色\n            ")])}],o=(i("96cf"),i("1da1")),n=(i("f751"),i("ac6a"),i("e7e5"),i("d399")),r=(i("e17f"),i("2241")),l=(i("ac1e"),i("543e")),c=(i("be7f"),i("565f")),d=i("22ce"),h=i("8a12"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"scrollWraper",staticClass:"wheel-wrapper"},[i("div",{ref:"cardWraper",staticClass:"wheel-scroll"},[t._t("default")],2)])},g=[],m=i("1fba"),p=(i("bf3c"),{components:{},props:{showPopup:!1},data:function(){return{isReady:!1}},methods:{getChildrenWidth:function(t){for(var e=t.children,i=0,s=0;s<e.length;s++)i+=e[s].clientWidth;return i},createScroll:function(){var t=this,e=this.getChildrenWidth(this.$refs.cardWraper),i=this.$refs.cardWraper.children[0].clientWidth;this.$refs.cardWraper.style.width=e-30+"px",this.scroll=new m["a"](this.$refs.scrollWraper,{startX:0,click:!1,scrollX:!0,scrollY:!1,eventPassthrough:"vertical",snap:{loop:!1,threshold:.1,stepX:i,stepY:100}}),this.scroll.on("scrollEnd",function(){var e=t.scroll.getCurrentPage();t.$emit("onSwiper",e.pageX)})},initScroll:function(){if(this.scroll){var t=this.getChildrenWidth(this.$refs.cardWraper);this.$refs.cardWraper.style.width=t-30+"px",this.scroll.refresh()}else this.createScroll()},toIndex:function(t){this.scroll.goToPage(t,0,10,"easing")},openVip:function(){this.$emit("update:showPopup",!0)}},created:function(){window.onresize=function(){}},mounted:function(){},updated:function(){this.initScroll()}}),f=p,v=(i("eca1"),i("2877")),I=Object(v["a"])(f,u,g,!1,null,"558d00e6",null);I.options.__file="swiper.vue";var b=I.exports,C={components:{"van-field":c["a"],"van-loading":l["a"],swiper:b},mixins:[h["a"]],data:function(){return{tabList:[],tabIndex:0,partIndex:-1,colorIndex:-1,eptColorIndex:-1,fontIndex:-1,picIndex:-1,fontVal:"",colorFontList:{},goodDetail:{},embPartList:[],eptPartList:[],allUseablePart:[],picList:[],eptColors:[],isLoading:!1,showCustDialog:!0,showRealPicFlag:!0,fontErrTip:"",custPrice:{},pageNum:1,picListPages:1,callGetUseablePartNum:2}},computed:{activeNavId:function(){return this.tabList.length&&this.tabIndex>=0?this.tabList[this.tabIndex].id:""},activePartItem:function(){return this.partIndex>=0?this.allUseablePart[this.partIndex]:{}},partListKey:function(){return 1==this.activeNavId?"embPartList":"eptPartList"},hasUseablePart:function(){return!(!this.embPartList.length&&!this.eptPartList.length)},embOrEptPrice:function(){var t=0;return t=1==this.activeNavId?this.custPrice.embFontsPrice:this.custPrice.embPrice,t*this.amount}},methods:{switchEptPic:function(t,e){this.picIndex!=e&&(this.picIndex=e,this.getEptColors(t.id))},getEptColors:function(t){var e=this;d["e"].getEptColors({id:t}).then(function(t){e.eptColorIndex=-1,t&&t.length?e.eptColors=t:e.eptColors=[]})},selectPart:function(t,e){this.partIndex!==e&&(this.partIndex=e)},dialogTip:function(t,e){r["a"].confirm({message:t}).then(function(){"function"===typeof e&&e()}).catch(function(){})},setDialogState:function(t){t?this.checkFormFull()&&(this.$refs.embDialogRef.$data.show=t):this.$refs.embDialogRef.$data.show=t},inputFocus:function(){this.scrollHeight=document.documentElement.scrollTop},resetPage:function(){var t=this,e=/[^\a-\z\A-\Z]/g,i=/[^\u4E00-\u9FA5]/g;if(this.fontVal){if(!e.test(this.fontVal))return void(this.fontVal.length>8?(this.fontVal="",Object(n["a"])("最多输入4个全中文或8个全英文~")):this.checkoutLoadFont("D_USELANGUAGE_EN"));i.test(this.fontVal)?(Object(n["a"])("最多输入4个全中文或8个全英文~"),this.fontVal=""):this.fontVal.length>4?(this.fontVal="",Object(n["a"])("最多输入4个全中文或8个全英文~")):this.checkoutLoadFont("D_USELANGUAGE_CH")}setTimeout(function(){window.scroll(0,t.scrollHeight)},100)},checkoutLoadFont:function(t){t!==this.useLanguage&&(this.colorIndex=-1,this.fontIndex=-1,this.useLanguage=t,this.getColorFontList(this.useLanguage))},getGoodInfoPartIndex:function(t){for(var e=this.goodDetail.detailedList,i=0;i<e.length;i++)if(t==e[i].regionCode)return i},checkoutCanBuy:function(t){var e=this;if(this.ms_isUnSell)Object(n["a"])("该商品已下架");else if(!this.isSaveing){if(this.isSaveing=!0,!this.userInfo.mobilePhone)return this.$router.push("/bind-phone"),void(this.isSaveing=!1);this.checkoutStockPromise().then(function(i){1==i.enoughAll?e.toBuy(t):(Object(n["a"])("库存不足~"),e.isSaveing=!1)},function(t){e.isSaveing=!1})}},checkoutStockPromise:function(){var t=[];t.push({count:this.amount,orderFlag:this.goodDetail.orderFlag,ptiPartDtSkuId:this.goodDetail.ptiPartSkuId,ptiPartHdCode:this.goodDetail.goodCode,ptiPartHdId:this.goodDetail.ptiPartHdId});var e={companyId:Storage.get("COMPANYID").company_id,ownCompanyId:Storage.get("COMPANYID").company_id,usrId:Storage.get("USER_INFO").usrId,inventoryJudgeDtos:t,shopId:Storage.get("properties").shopId};return d["e"].getGroupGoodsStockCust(e)},toBuy:function(t){var e=this,i={companyId:Storage.get("COMPANYID").company_id,usrId:Storage.get("USER_INFO").usrId,ctmUsrId:Storage.get("USER_INFO").usrId,cookieId:Storage.get("USER_INFO").cookieId,shopCode:Storage.get("USER_INFO").shopCode,usrKey:Storage.get("USER_INFO").usrId,sourceCode:"D_ORDWEIN"};if("design"==t){if(!this.checkFormFull())return this.isSaveing=!1,!1;this.setEmbInfo(!1,this.activeNavId)}else this.goodDetail.detailedList=this.getPartListParams(this.goodDetail.detailedList);i.skuList=[{mainFabricId:Storage.get("toReserveParams").mainFabricId||this.goodDetail.mainFabricId,ptiPartDtSkuId:this.goodDetail.ptiPartSkuId,amount:this.amount,colorCode:this.goodDetail.colorCode,dealPrice:"",sizeCode:this.goodDetail.sizeCode,salePrice:this.goodDetail.salePrice,tagPrice:this.goodDetail.tagPrice,goodsCode:this.goodDetail.goodCode,thumb:this.goodDetail.fileUrl,pictFileId:this.goodDetail.pictFileId,partList:this.goodDetail.detailedList}],i.amountOrd=this.goodDetail.salePrice*this.amount,console.log("打印一波参数",i),c_emitBill(i).then(function(t){e.$router.push({name:"orderSettlement",query:{orderHdId:t},params:e.$route.params}),e.isSaveing=!1},function(t){e.isSaveing=!1})},getPartListParams:function(t){return t.map(function(t){return{regionCode:t.regionCode,partCode:t.partCode,fabricCode:t.fabricCode,partId:t.partId,fabricId:t.fabricId,regionId:t.regionId,memo:"",emb:[],ept:[],prt:[],salePrice:"",tagPrice:""}})},setEmbInfo:function(t,e){var i=this.goodDetail.detailedList,s={};s=this.allUseablePart[this.partIndex];for(var a=0;a<i.length;a++)if(s.regionClassCode==i[a].regionCode){var o={};switch(e){case 1:if(t)return s.custInfo&&(s.custInfo.emb=[]),!1;var r={};r.content=this.fontVal,r.colorId=this.colorFontList.colorList[this.colorIndex].id,r.fontsId=this.colorFontList.fontList[this.fontIndex].id,r.rotate=0,r.scale=0,r.xcoordinate=0,r.ycoordinate=0,r.embPictId="",r.colorNumberHx=this.colorFontList.colorList[this.colorIndex].colorNumberHx,r.ictEmbFontsHdName=this.colorFontList.fontList[this.fontIndex].ictEmbFontsHdName,o.emb=[],o.emb.push(r);break;case 2:if(t)return s.custInfo&&(s.custInfo.ept=[]),!1;var l={};l.embId=this.picList[this.picIndex].id,l.rotate=0,l.scale=0,l.xcoordinate=0,l.ycoordinate=0,l.embPrintPictId="",l.colorId=this.eptColors[this.eptColorIndex].colorId,l.imageUrl=this.picList[this.picIndex].imageUrl,l.imageId=this.picList[this.picIndex].imageId,o.ept=[],o.ept.push(l);break}return s.custInfo=Object.assign(i[a],o),s}return Object(n["a"])("该设计部位与默认部件匹配不上~"),!1},checkFormFull:function(){var t="";if(1==this.activeNavId)switch(!0){case this.partIndex<0:t="请选择刺绣部位";break;case!this.fontVal:t="请输入绣字内容";break;case this.fontIndex<0:t="请选择刺绣字体";break;case this.colorIndex<0:t="请选择刺绣颜色";break}else switch(!0){case this.partIndex<0:t="请选择刺绣部位";break;case this.picIndex<0:t="请选择刺绣图片";break;case this.eptColorIndex<0:t="请选择刺绣颜色";break}return!t||(Object(n["a"])(t),!1)},getUseablePart:function(t){var e=this,i="";i=1==t.id?"embPartList":"eptPartList",this.ms_getUseablePart(t,this.goodDetail.ptiPartHdId).then(function(s){if(s.forEach(function(e){e.custInfo={emb:[],ept:[]},e.custLevel=1==t.id?"emb":"ept"}),e[i]=s,!s||s.length<=0||1==t.id&&e.checkoutLoadFont(""),e.callGetUseablePartNum--,0===e.callGetUseablePartNum)if(e.hasUseablePart){if(e.allUseablePart.length){var a=[];s.forEach(function(t){for(var i=0;i<e.allUseablePart.length;i++){if(e.allUseablePart[i].id==t.id){e.allUseablePart[i].custLevel="all";break}e.allUseablePart.length==i+1&&a.push(t)}}),e.allUseablePart=e.allUseablePart.concat(a)}else e.allUseablePart=s;e.partIndex=0}else e.dialogTip("该商品暂无个性定制部位，是否生成订单？",e.checkoutCanBuy);else 1===e.callGetUseablePartNum&&(e.allUseablePart=s)})},getColorFontList:function(t){var e=this,i={useLanguageCode:t||""};d["e"].getEmbFontColorList(i).then(function(t){t.fontList=t.fontList.filter(function(t){return 1==t.effFlag}),e.colorFontList=t,t.fontList.length,e.fontIndex=-1,e.colorIndex=-1})},onSwiper:function(t){if(this.pageNum!=t+1){this.showRealPicFlag=!1;var e=this.getGoodInfoPartIndex(this.activePartItem.regionClassCode);this.pageNum=t+1,this.picIndex=-1,this.eptColorIndex=-1,this.eptColors=[],this.getPicList(this.goodDetail.detailedList[e].regionCode)}},getPicList:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var i,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i={pageNum:this.pageNum,pageSize:12,type:2,goodsCode:this.goodsCode,regionCode:e,definedFlag:0},t.next=3,d["e"].getEmbPicList(i).then(function(t){s.picList=t.list,s.picListPages=t.pages,s.$nextTick(function(){s.$refs.swiperRef.initScroll(),s.showRealPicFlag=!0})});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getFont:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=document.createElement("style"),e.forEach(function(t){var e=baseConstant.serverUrl+"file-system/getImg?fileUrl="+t.fontttfUrl+"&companyId="+Storage.get("COMPANYID").company_id;i.appendChild(document.createTextNode("@font-face {font-family:"+t.ictEmbFontsHdName+';src: url("'+e+'")}'))}),document.head.appendChild(i);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getGoodsInfo:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={busContsCode:baseConstant.busContsCode,partCode:this.goodsCode,shopId:Storage.get("USER_INFO").shopId},t.next=3,d["e"].getGoodsInfoCus(e).then(function(t){var e=t.urlList;e&&0!=e.length||(t.urlList=[],t.urlList.push({url:"aa",fileId:""})),t.detailedList=i.getPartListParams(t.detailedList),i.goodDetail=t});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),switchNav:function(t,e,i){if((this.tabIndex!==e||i)&&(this.tabIndex=e,2==t.id)){var s=this.getGoodInfoPartIndex(this.activePartItem.regionClassCode);this.pageNum=1,this.getPicList(this.goodDetail.detailedList[s].regionCode)}},getUserInfo:function(t){var e=this;this.isLoading=!0,d["m"].getUserInfo({usrId:Storage.get("USER_INFO").usrId,companyId:Storage.get("COMPANYID").company_id}).then(function(i){e.isLoading=!1,e.userInfo=i,"function"===typeof t&&t()},function(t){e.isLoading=!1})},getTabItem:function(t){for(var e=0;e<this.tabList.length;e++)if(this.tabList[e].id==t)return{item:this.tabList[e],index:e}},clearSelectedForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"!==t&&"emb"!==t||(this.colorIndex=-1,this.fontIndex=-1,this.fontVal=""),"all"!==t&&"ept"!==t||(this.picIndex=-1,this.eptColorIndex=-1,this.eptColors=[])},getCustPrice:function(){var t=this,e={hasEmb:!0,orderFlag:1,hasEmbFonts:!0,hasPrint:!0,ptiPartHdId:this.goodDetail.ptiPartHdId};d["e"].getCustPrice(e).then(function(e){t.custPrice=e})}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.goodsCode=Storage.get("toReserveParams").goodCodes,this.tabList=this.ms_tabList,this.amount=Storage.get("toReserveParams").amount||1,t.next=5,this.getGoodsInfo();case 5:this.ms_checkoutGoodSell(),this.callGetUseablePartNum=this.tabList.length,this.tabList.forEach(function(t){e.getUseablePart(t)}),this.getUserInfo(),this.getCustPrice(),this.fullHeight=document.documentElement.clientHeight,window.resize=function(){var t=document.getElementsByClassName("foot-btn");e.fullHeight>document.documentElement.clientHeight?t.style.position="absolute":t.style.position="fixed"};case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),watch:{fontVal:function(t){t||this.checkoutLoadFont("")},partIndex:function(t){var e=this;this.clearSelectedForm("ept"),this.$nextTick(function(){e.$refs.swiperRef&&e.$refs.swiperRef.toIndex(0);var t={};switch(e.activePartItem.custLevel){case"all":case"emb":t=e.getTabItem(1),e.switchNav(t.item,t.index);break;case"ept":t=e.getTabItem(2),e.switchNav(t.item,t.index,!0);break}})}}},A=C,L=(i("7d47"),Object(v["a"])(A,s,a,!1,null,"28b9c7f2",null));L.options.__file="good-embroider-new.vue";e["default"]=L.exports},a1e8:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAACyElEQVRIS72WMWgUQRSG/zdnLpyQGIPsFFY2dhaWxosoRhATI0ZD0liJhRhBLWxFsAqINmIhphKjRCMB7xCNoCQxdoJioY2VxWyCCYdgLpebJ7OZPWc3m9zpXdxyd9775r33z79D+M8PubwpKbuIeajk+4OHgKXw22cgveB5D8E8kp2by9cTUwHOStmlgQkGtoL5Zcn3TxiogS1K+ZSBHgaKpHVfCDUbFDaGmV+t+H5vtZgAGIHZ7ZsEmVKpv5hOPzCwsKoQykIsh7DKtyoxZqMBcMbzxpjodMI4FwBsj783UAGUg26sfRJjAOSySvUEwDzQ3CrlOIBjm6EhBiZTSvV2AL8qM9wsqAszxURUmm9vb21tavoGoL0hlTIXfi4t7TpaKPwI80Uq3CblE1cgwSLmq0z0Acx9RHR+9RXfBdE4Me8F0bBd94KJbgqt21iIMVdIoXorFZp2JsIACKCrQ6nX01JeAnDLJrqcVer2OykPa2DSJhrZr9TZGSk9BpTbIffIBBVOed4YJavUlHOHiL4y80EQnbTVPCOiN8y8G0QXbPL3BIxqoIWAGwnKft6p1PEAOO15R0A0ASDTkNnFkphjxOXyqQPz87nKDDcL6sLWqDQRWkdL47A1QNcbw67UI5q490aASX7akGMRM/x1zbuR4nErrWbejeTWbN45Br4TsAfAPruDWQY+EbATQLdt/RcmegvmDBGdiRz8vzHvekQT2KADq828tR7QzFNCiHMgum6ruaa1vieIOiHEY5v4EZfLV7akUjs08NGu+wfzrnOKro/WZN518myhf+47G5s38yKI2hKMuEiATvTe9WM2Nm8z7JVisT/d3GwuUatKXBVBYMRCiOW44VeLWde8XWXZf6W5JnbHvdH13lpjIleMIAEwJHx/0Fx4wqoMtMXzRlnr+2aXbotNDBNdTCk1UEtMBNgIgVTL8RunATU7DZ4P6wAAAABJRU5ErkJggg=="},abbc:function(t,e,i){t.exports=i.p+"img/default-img.e08eecc2.png"},bb68:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABQUlEQVRIS7XVPY6CQBQH8P+I1RZbKdq7wSN4DUKihSZexAJjNEYlfgQ1eAXvsYVXsFgVVgvLbbYyGsdoBIeRr6GhIHm/eX8eD/Ity/qZkCYEXeRaVyRCAZHIAxCFuIAkkM9SCX+r1eONvgBxkFythsJggINlYdtqUYQJ8BCSTiOraTgul665kysVfI3HIKkUtp0O9qbJB/wQxbKQVVU4kwnsbpcWyWgaFNMEkSTY/T6c4ZAf0fPRvCOcUVUos9mtmGHgf72GMp/j2pkzGsHu9Vyd+UbEQ+Ry+RaHJOF8OtH773SKXbv98rkGAlhx5apVFAyDZn5YLLDRdeYuCAywkHy9jo9iET+Nhu+iCQVEGeHQQFgkEhAGiQwERWIBQZDYwDskEYC7u3wHOMID1p8xsQ7u5/EiiQPeuIQAz4gw4I5cAHN0gTAtv1tGAAAAAElFTkSuQmCC"},cbf0:function(t,e,i){},e81d5:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAACxklEQVRIS+2VTUhUURTH/+e9URT68GvetVq06YNaJARB2puBhKACKSKLir6gWvQBSgQqQbYoq0VJCyEMInHR1yqkhJDA7pCLCGrT56qgvG+EUQqcacZ34o4z09PUmaEQCu/yvPM/v3vO/d/7CLO8aJZ5ICkEp6A3baWOSiEaAFzTMZe5Kug4r/PZVL9lrTGIXqU0jbZS7VKITgBHdOwXkLnLdpyD0rL2gahbf2TgbECpC/kApd/fDMO4mNrw/qDjdEvLug2iA5OB741otNotLj4DoCkFGYzHYqs2Dg8P5wKVFRXzYRjvQLQouWHmK2Y0etktKnoOohUTgdNUJOB+jVK7Kdnw9IsBCllWN4j2zpTnPUOd94kSiZ1smsdBdCgtJOAOj40ds4eGvk1VTHdGpnmDgT2Z78xdTNRBwF0ASzO1PKbRsQFbqeqnJSUlvsLCN0RUmU5k5q/EfD2eSPSMRiIfdHxBWdkymGYdiE6BaLEndxCx2OrAyEjkmRAhAmqmA+q51QWU6gmVl9fC53vMQGEu5+eZxo8xYGtQqT7p92+BYTzy6iePVJ/0Fx+wdr3jKCmEdmhLPkAAbbZSLQOWJRLAS2/n05qGmTsCjnNCCtEG4GRynETLs4DfgnkJA50BxzkthbgKoHGy5vcOxzMu2Uo1SyGaXNf9GAyHH0i/PwDDqAdzEERVqUL6gvfDde/Z4bCUlrUDROvSWt1t3kAwrxyNxxs2RSIjabEUok8/GrZStenYi9LShdGCgnYQDf4ZcHyX3xl4yK77xGcYn13gFjOTj+hwnLnSINoMYBuAed7p5N4hcy9cdxeZZhcD2/MyTRZt5m8RsqxzTNSaV/Eck4m5dYPjnE+6NK2ZAGTujTPXFxiGfsT1qHJfU2izAz0uneocstAzDk9r54D6efurLs1lpLmbJIfM7MA5l848xn/hWvxPLv0JVTX8aYjYEG0AAAAASUVORK5CYII="},eca1:function(t,e,i){"use strict";var s=i("3363"),a=i.n(s);a.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-494b41f1"],{"0b33":function(t,e,i){"use strict";var s=i("fe7e"),a=i("f331");e["a"]=Object(s["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isSelected,expression:"isSelected"}],class:t.b("pane")},[t.inited?t._t("default"):t._e(),t.$slots.title?i("div",{ref:"title"},[t._t("title")],2):t._e()],2)},name:"tab",mixins:[a["a"]],props:{title:String,disabled:Boolean},data:function(){return{inited:!1}},computed:{index:function(){return this.parent.tabs.indexOf(this)},isSelected:function(){return this.index===this.parent.curActive}},watch:{"parent.curActive":function(){this.inited=this.inited||this.isSelected},title:function(){this.parent.setLine()}},created:function(){this.findParent("van-tabs")},mounted:function(){var t=this.parent.tabs,e=this.parent.$slots.default.indexOf(this.$vnode);t.splice(-1===e?t.length:e,0,this),this.$slots.title&&this.parent.renderTitle(this.$refs.title,this.index)},beforeDestroy:function(){this.parent.tabs.splice(this.index,1)}})},"222d":function(t,e,i){"use strict";var s=i("dffa"),a=i.n(s);a.a},"22d5":function(t,e,i){},"2ae2":function(t,e,i){"use strict";var s=i("67bc"),a=i.n(s);a.a},"3ff4":function(t,e,i){},"5e46":function(t,e,i){"use strict";var s=i("fe7e"),a=i("8624"),n=i("db78"),c=i("023d"),o=i("3875");e["a"]=Object(s["a"])({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b([t.type])},[i("div",{ref:"wrap",class:[t.b("wrap",{scrollable:t.scrollable}),{"van-hairline--top-bottom":"line"===t.type}],style:t.wrapStyle},[i("div",{ref:"nav",class:t.b("nav",[t.type]),style:t.navStyle},["line"===t.type?i("div",{class:t.b("line"),style:t.lineStyle}):t._e(),t._l(t.tabs,function(e,s){return i("div",{ref:"tabs",refInFor:!0,staticClass:"van-tab",class:{"van-tab--active":s===t.curActive,"van-tab--disabled":e.disabled},style:t.getTabStyle(e,s),on:{click:function(e){t.onClick(s)}}},[i("span",{ref:"title",refInFor:!0,staticClass:"van-ellipsis"},[t._v(t._s(e.title))])])})],2)]),i("div",{ref:"content",class:t.b("content")},[t._t("default")],2)])},name:"tabs",mixins:[o["a"]],model:{prop:"active"},props:{color:String,sticky:Boolean,lineWidth:Number,swipeable:Boolean,active:{type:[Number,String],default:0},type:{type:String,default:"line"},duration:{type:Number,default:.2},swipeThreshold:{type:Number,default:4},offsetTop:{type:Number,default:0}},data:function(){return{tabs:[],position:"",curActive:null,lineStyle:{},events:{resize:!1,sticky:!1,swipeable:!1}}},computed:{scrollable:function(){return this.tabs.length>this.swipeThreshold},wrapStyle:function(){switch(this.position){case"top":return{top:this.offsetTop+"px",position:"fixed"};case"bottom":return{top:"auto",bottom:0};default:return null}},navStyle:function(){return{borderColor:this.color}}},watch:{active:function(t){t!==this.curActive&&this.correctActive(t)},color:function(){this.setLine()},tabs:function(t){this.correctActive(this.curActive||this.active),this.scrollIntoView(),this.setLine()},curActive:function(){this.scrollIntoView(),this.setLine(),"page-top"!==this.position&&"content-bottom"!==this.position||c["a"].setScrollTop(window,c["a"].getElementTop(this.$el))},sticky:function(){this.handlers(!0)},swipeable:function(){this.handlers(!0)}},mounted:function(){var t=this;this.correctActive(this.active),this.setLine(),this.$nextTick(function(){t.handlers(!0),t.scrollIntoView(!0)})},activated:function(){var t=this;this.$nextTick(function(){t.handlers(!0),t.scrollIntoView(!0)})},deactivated:function(){this.handlers(!1)},beforeDestroy:function(){this.handlers(!1)},methods:{handlers:function(t){var e=this.events,i=this.sticky&&t,s=this.swipeable&&t;if(e.resize!==t&&(e.resize=t,(t?n["b"]:n["a"])(window,"resize",this.setLine,!0)),e.sticky!==i&&(e.sticky=i,this.scrollEl=this.scrollEl||c["a"].getScrollEventTarget(this.$el),(i?n["b"]:n["a"])(this.scrollEl,"scroll",this.onScroll,!0),this.onScroll()),e.swipeable!==s){e.swipeable=s;var a=this.$refs.content,o=s?n["b"]:n["a"];o(a,"touchstart",this.touchStart),o(a,"touchmove",this.touchMove),o(a,"touchend",this.onTouchEnd),o(a,"touchcancel",this.onTouchEnd)}},onTouchEnd:function(){var t=this.direction,e=this.deltaX,i=this.curActive,s=50;"horizontal"===t&&this.offsetX>=s&&(e>0&&0!==i?this.setCurActive(i-1):e<0&&i!==this.tabs.length-1&&this.setCurActive(i+1))},onScroll:function(){var t=c["a"].getScrollTop(window)+this.offsetTop,e=c["a"].getElementTop(this.$el),i=e+this.$el.offsetHeight-this.$refs.wrap.offsetHeight;this.position=t>i?"bottom":t>e?"top":"";var s={scrollTop:t,isFixed:"top"===this.position};this.$emit("scroll",s)},setLine:function(){var t=this;this.$nextTick(function(){if(t.$refs.tabs&&"line"===t.type){var e=t.$refs.tabs[t.curActive],i=t.lineWidth||e.offsetWidth/2,s=e.offsetLeft+(e.offsetWidth-i)/2;t.lineStyle={width:i+"px",backgroundColor:t.color,transform:"translateX("+s+"px)",transitionDuration:t.duration+"s"}}})},correctActive:function(t){t=+t;var e=this.tabs.some(function(e){return e.index===t}),i=(this.tabs[0]||{}).index||0;this.setCurActive(e?t:i)},setCurActive:function(t){t=this.findAvailableTab(t,t<this.curActive),this.isDef(t)&&t!==this.curActive&&(this.$emit("input",t),null!==this.curActive&&this.$emit("change",t,this.tabs[t].title),this.curActive=t)},findAvailableTab:function(t,e){var i=e?-1:1,s=t;while(s>=0&&s<this.tabs.length){if(!this.tabs[s].disabled)return s;s+=i}return t},onClick:function(t){var e=this.tabs[t],i=e.title,s=e.disabled;s?this.$emit("disabled",t,i):(this.setCurActive(t),this.$emit("click",t,i))},scrollIntoView:function(t){if(this.scrollable&&this.$refs.tabs){var e=this.$refs.tabs[this.curActive],i=this.$refs.nav,s=i.scrollLeft,a=i.offsetWidth,n=e.offsetLeft,c=e.offsetWidth;this.scrollTo(i,s,n-(a-c)/2,t)}},scrollTo:function(t,e,i,s){if(s)t.scrollLeft+=i-e;else{var n=0,c=Math.round(1e3*this.duration/16),o=function s(){t.scrollLeft+=(i-e)/c,++n<c&&Object(a["a"])(s)};o()}},renderTitle:function(t,e){var i=this;this.$nextTick(function(){var s=i.$refs.title[e];s.parentNode.replaceChild(t,s)})},getTabStyle:function(t,e){var i={},s=this.color,a=e===this.curActive,n="card"===this.type;return s&&(t.disabled||n===a||(i.color=s),!t.disabled&&n&&a&&(i.backgroundColor=s),n&&(i.borderColor=s)),i}}})},"67bc":function(t,e,i){},8624:function(t,e,i){"use strict";(function(t){i.d(e,"a",function(){return r});var s=i("a142"),a=Date.now();function n(t){var e=Date.now(),i=Math.max(0,16-(e-a)),s=setTimeout(t,i);return a=e+i,s}var c=s["e"]?t:window,o=c.requestAnimationFrame||c.webkitRequestAnimationFrame||n;c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.clearTimeout;function r(t){return o.call(c,t)}}).call(this,i("c8ba"))},a40d:function(t,e,i){"use strict";var s=i("a879"),a=i.n(s);a.a},a879:function(t,e,i){},bb3f:function(t,e,i){"use strict";var s=i("3ff4"),a=i.n(s);a.a},bda7:function(t,e,i){"use strict";i("5548")},da3c:function(t,e,i){"use strict";i("5548"),i("22d5")},dffa:function(t,e,i){},e78a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-vouchers"},[i("div",{staticClass:"my-vouchers-tab"},t._l(t.tabList,function(e,s){return i("div",{key:s,class:[t.tabActive===s?"active":""],on:{click:function(i){t.tabClick(e,s)}}},[i("span",[t._v(t._s(e.nameCn))])])})),i("van-list",{staticClass:"vouchers-list",attrs:{finished:t.finished,offset:10,"immediate-check":!0},on:{load:t.loadMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("van-pull-refresh",{attrs:{"head-height":100},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("couponList",{attrs:{cardState:t.tabActive,cardList:t.cardList,reload:t.handleCarList}}),t.showEmpty?i("empty",{attrs:{emptyText:"暂无优惠券~"}}):t._e()],1)],1),i("div",{staticClass:"go-vouchers-btn",on:{click:function(e){e.preventDefault(),t.routeLink()}}},[t._v("去领券")])],1)},a=[],n=(i("a481"),i("e7e5"),i("d399")),c=(i("96cf"),i("1da1")),o=(i("ab71"),i("58e6")),r=(i("2994"),i("2bdd")),l=(i("da3c"),i("0b33")),d=(i("bda7"),i("5e46")),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vouchers"},[t._l(t.cardList,function(e,s){return t.cardList.length>0?i("ul",{key:s,staticClass:"vouchers-list"},[i("li",{staticClass:"vouchers-item"},[i("div",{staticClass:"item"},[i("div",{staticClass:"item-price"},[10060203!=e.cardType?i("div",{staticClass:"price",class:[{"gray-color":1===t.tabType||2===t.tabType}]},[e.remainAmount>0?i("div",[i("div",{staticClass:"gray-color"},[t._v("余额")]),i("div",[i("span",[t._v("¥")]),i("span",[t._v(t._s(t._f("Fix2")(e.remainAmount)))])])]):t._e(),0===e.remainAmount?i("div",[i("span",[t._v("¥")]),i("span",[t._v(t._s(t._f("Fix2")(e.initialValue)))])]):t._e()]):t._e(),10060203===e.cardType?i("div",{staticClass:"discount",class:[{"gray-color":1===t.tabType||2===t.tabType}]},[i("span",[t._v(t._s(e.discount))]),i("span",[t._v("折")])]):t._e()]),i("div",{staticClass:"item-info"},[i("div",{staticClass:"info-title",class:[{"gray-color":1===t.tabType||2===t.tabType}]},[i("span",[t._v(t._s(e.couponName))]),1===t.tabType?i("span",{staticClass:"info-title-status"},[t._v("已使用")]):t._e(),2===t.tabType?i("span",{staticClass:"info-title-status"},[t._v("已过期")]):t._e()]),i("p",{staticClass:"info-date"},[t._v(t._s(e.couponTimeStart)+" - "+t._s(e.couponTimeEnd))]),i("p",{staticClass:"info-description",on:{click:function(i){t.showDesc(e,s)}}},[t._v("\n                        使用说明\n                        "),i("i",{staticClass:"iconfont icon-down",class:[e.showOrHide?"tran-up":"tran-down"]})])]),0===t.tabType?i("div",{staticClass:"item-buy"},[0===t.tabType?i("div",[e.weixinId&&null!==e.weixinId&&0===e.isSyncToWechet?i("p",{staticClass:"buy-price fs24",on:{click:function(i){t.getWechatConfig(e)}}},[t._v("加入微信卡包")]):t._e(),1===e.isSyncToWechet?i("p",{staticClass:"buy-price fs24-gray"},[t._v("已加入微信卡包")]):t._e(),i("div",{staticClass:"buy-btn",on:{click:function(e){t.gotoGoodsList()}}},[t._v("使用")])]):t._e()]):t._e()]),e.projectRmk?i("div",{staticClass:"item-desc",class:[e.showOrHide?"none":""]},[t._v(t._s(e.projectRmk))]):t._e()])]):t._e()}),0===t.cardList.length?i("div",{staticClass:"empty-content bg-gray"},[i("p",[t._v("优惠券为空")])]):t._e()],2)},f=[],h=(i("28a5"),i("18a0")),p=i.n(h),v=i("22ce"),b=i("2b61"),C={props:["tabType","cardList"],data:function(){return{}},created:function(){},methods:{showDesc:function(t,e){t.showOrHide=!t.showOrHide},getWechatConfig:function(t){if(0!==t.expiringFlag){var e={card_id:t.weixinId,code:t.cardCode,isNeedOpenid:0,wxuuid:baseConstant.publicAccount||b["a"].get("properties").publicAccount};v["o"].getWxconfig(e).then(function(e){var i=window.location.href.split("#")[0],s={wxUUID:baseConstant.publicAccount||b["a"].get("properties").publicAccount,unAuthorizedUrl:encodeURIComponent(i)};v["h"].getWxSignature(s).then(function(i){p.a.config({debug:!1,appId:i.appId,timestamp:i.timeStamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:["addCard"]}),p.a.ready(function(){p.a.addCard({cardList:[{cardId:t.weixinId,cardExt:JSON.stringify(e)}],success:function(t){Object(n["a"])("添加成功~");t.cardList}})})})})}},gotoGoodsList:function(){this.$router.push("/goods")}},computed:{showRemainTag:function(){}}},m=C,_=(i("a40d"),i("2877")),g=Object(_["a"])(m,u,f,!1,null,"706c6784",null);g.options.__file="MyVouchers.vue";var w=g.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-coupon"},t._l(t.coupons,function(e,s){return i("coupon",{key:s,attrs:{card:e},on:{reload:t.refresh}})}))},y=[],L=(i("ac6a"),i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isDisCoupon?i("div",{staticClass:"mgB30"},[i("div",{staticClass:"coupon flex-box"},[i("div",{staticClass:"left flex-center"},[i("div",[i("span",{staticClass:"fs48B"},[t._v(t._s(t.card.discount))]),i("span",{staticClass:"fs24"},[t._v(" 折")])])]),i("div",{staticClass:"center flex-auto flex-vbox flex-between pdTb20"},[i("p",{staticClass:"fs28B"},[t._v(t._s(t.card.couponName))]),i("div",{staticClass:"fs26 flex-auto"},[2===t.card.state?i("span",[t._v("已过期  ")]):t._e(),i("div",{staticClass:"date-color fs24"},[t._v(t._s(t.valiPeriod))])]),i("div",{staticClass:"fs24 date-color",on:{click:function(e){t.showUsage()}}},[t._v("\n                    使用说明\n                    "),i("i",{class:["iconfont icon-down ",{rotatingUp:t.showDesc,rotatingDown:!t.showDesc}]})])]),0===t.card.state?i("div",{staticClass:"right"},[t.card.weixinId&&null!==t.card.weixinId&&0===t.card.isSyncToWechet?i("span",{staticClass:"add-to-wx fs24"},[t._v("加入微信卡包")]):t._e(),1===t.card.isSyncToWechet?i("div",{staticClass:"fs24 mgB30"},[t._v("已加入微信卡包")]):t._e(),i("div",{staticClass:"button flex-center",on:{click:function(e){t.goToGoodsList()}}},[t._v("使用")])]):t._e()]),t.showDesc?i("div",{staticClass:"describe"},[t._v("使用范围 : "+t._s(t.card.couponLimit))]):t._e()]):t._e(),t.isCashCoupon?i("div",{staticClass:"mgB30"},[i("div",{staticClass:"coupon flex-box"},[i("div",{staticClass:"left flex-center"},[i("div",[i("span",{staticClass:"fs24"},[t._v("¥ ")]),i("span",{staticClass:"fs36B"},[t._v(t._s(t.card.remainAmount))])])]),i("div",{staticClass:"center flex-auto flex-vbox flex-between pdTb20"},[i("p",{staticClass:"fs28B"},[t._v(t._s(t.card.couponName))]),i("div",{staticClass:"fs26"},[2===t.card.state?i("span",[t._v("已过期  ")]):t._e(),i("div",{staticClass:"date-color fs24"},[t._v(t._s(t.valiPeriod))])]),i("div",{staticClass:"fs24 date-color",on:{click:function(e){t.showUsage()}}},[t._v("\n                    使用说明\n                    "),i("i",{class:["iconfont icon-down ",{rotatingUp:t.showDesc,rotatingDown:!t.showDesc}]})])]),0===t.card.state?i("div",{staticClass:"right flex-vbox"},[t.card.weixinId&&null!==t.card.weixinId&&0===t.card.isSyncToWechet?i("span",{staticClass:"add-to-wx fs24"},[t._v("加入微信卡包")]):t._e(),1===t.card.isSyncToWechet?i("div",{staticClass:"fs24 mgB30"},[t._v("已加入微信卡包")]):t._e(),i("div",{staticClass:"button flex-center",on:{click:function(e){t.goToGoodsList()}}},[t._v("使用")])]):t._e()]),t.showDesc?i("div",{staticClass:"describe"},[t._v("使用范围 : "+t._s(t.card.couponLimit))]):t._e()]):t._e(),t.isOnceCard?i("div",{staticClass:"mgB30"},[i("div",{staticClass:"coupon flex-box"},[i("div",{staticClass:"left flex-vbox flex-center"},[i("span",{staticClass:"fs16 date-color"},[t._v("余额")]),i("div",[i("span",{staticClass:"fs24"},[t._v("¥ ")]),i("span",{staticClass:"fs36B"},[t._v(t._s(t.card.remainAmount))])])]),i("div",{staticClass:"center flex-auto flex-vbox flex-between pdTb20"},[i("p",{staticClass:"fs28B"},[t._v(t._s(t.card.couponName))]),i("div",{staticClass:"fs26"},[2===t.card.state?i("span",[t._v("已过期  ")]):t._e(),i("div",{staticClass:"date-color fs24"},[t._v(t._s(t.valiPeriod))])]),i("div",{staticClass:"fs24 date-color",on:{click:function(e){t.showUsage()}}},[t._v("\n                    使用说明\n                    "),i("i",{class:["iconfont icon-down   ",{rotatingUp:t.showDesc,rotatingDown:!t.showDesc}]})])]),0===t.card.state?i("div",{staticClass:"right flex-vbox"},[i("div",{staticClass:"button flex-center",on:{click:function(e){t.goToGoodsList()}}},[t._v("使用")])]):t._e()]),t.showDesc?i("div",{staticClass:"describe"},[t._v("使用范围 : "+t._s(t.card.couponLimit))]):t._e()]):t._e(),t.isStoredCard?i("div",{staticClass:"mgB30"},[i("div",{staticClass:"coupon flex-box"},[i("div",{staticClass:"left flex-vbox flex-center"},[i("div",[i("span",{staticClass:"fs24"},[t._v("¥ ")]),i("span",{staticClass:"fs36B"},[t._v(t._s(t.card.remainAmount))])])]),i("div",{staticClass:"center flex-auto flex-vbox flex-between pdTb20"},[i("p",{staticClass:"fs28B"},[t._v(t._s(t.card.couponName))]),i("div",{staticClass:"fs26"},[2===t.card.state?i("span",[t._v("已过期  ")]):t._e(),i("div",{staticClass:"date-color fs24"},[t._v(t._s(t.valiPeriod))])]),i("div",{staticClass:"fs24 date-color",on:{click:function(e){t.showUsage()}}},[t._v("\n                    使用说明\n                    "),i("i",{class:["iconfont icon-down ",{rotatingUp:t.showDesc,rotatingDown:!t.showDesc}]})])]),0===t.card.state?i("div",{staticClass:"right flex-vbox"},[i("div",{staticClass:"button flex-center",on:{click:function(e){t.charge()}}},[t._v("使用")])]):t._e()]),t.showDesc?i("div",{staticClass:"flex-vbox fs24 gray"},[i("div",{staticClass:"flex-box mgTb20"},[i("div",{staticClass:"flex-box flex-auto"},[i("div",{},[t._v("卡号 :")]),i("div",{staticClass:"flex-auto pdL20"},[t._v(t._s(t.card.cardCode))])]),i("div",{staticClass:"flex-box flex-auto"},[i("div",{},[t._v("密码 :")]),i("div",{staticClass:"flex-auto pdL20"},[t._v(t._s(t.card.password||"无需密码"))])])]),t.card.couponLimit?i("div",[t._v("使用范围 : "+t._s(t.card.couponLimit))]):t._e()]):t._e()]):t._e()])}),T=[],A=(i("e17f"),i("2241")),S=i("7433"),k={props:{card:Object,refreshIndex:Number},data:function(){return{showDesc:!1,couponNames:{10060201:"一次性储值卡",10060202:"现金券",10060203:"折扣券",10060206:"充值卡"}}},methods:{showUsage:function(){this.card.couponLimit&&(this.showDesc=!this.showDesc)},getCardConfig:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={card_id:this.card.weixinId,code:this.card.cardCode,isNeedOpenid:0,wxuuid:Storage.get("properties").publicAccount},t.abrupt("return",vouchersApi.getWxconfig(e));case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getWxConfig:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=window.location.href.split("#")[0],i={wxUUID:Storage.get("properties").publicAccount,unAuthorizedUrl:encodeURIComponent(e)},t.abrupt("return",orderApi.getWxSignature(i));case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addCards:function(t,e){wx.config({debug:!1,appId:t.appId,timestamp:t.timeStamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["addCard"]}),wx.ready(function(){wx.addCard({cardList:[{cardId:this.card.weixinId,cardExt:JSON.stringify(e)}],success:function(t){Object(n["a"])("添加成功~");t.cardList},error:function(t){Object(n["a"])("添加失败~",t),console.error("err",t)}})})},addToWxCardPkgs:function(){var t=this;0!==this.card.expiringFlag&&this.$requestAll([this.getWxConfig(),this.getCardConfig()]).then(function(e){console.log("request",e),t.addCards(e[0],e[1])})},goToGoodsList:function(){this.$router.push("/goods")},chargeByCardId:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e={cardId:this.card.cardId},S["chargeByCardId"](e).then(function(t){1===t?(Object(n["a"])("充值成功"),i.$emit("reload")):Object(n["a"])("充值失败")},function(t){Object(n["a"])("充值失败")});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),charge:function(){var t=this;A["a"].confirm({message:"是否确定将金额充值至我的资金账户?"}).then(function(){t.chargeByCardId()})}},computed:{valiPeriod:function(){var t=this.card.couponTimeStart.split(" "),e=this.card.couponTimeEnd.split(" "),i=t[0].replace(/\-/g,".")+" "+t[1].substr(0,5),s=e[0].replace(/\-/g,".")+" "+e[1].substr(0,5);return i+"-"+s},isCashCoupon:function(){return"D_CASHVOLUME"===this.card.cardTypeCode},isDisCoupon:function(){return"D_DISCOUNTCOUPONS"===this.card.cardTypeCode},isStoredCard:function(){return"D_RECHARGEABLECARD"===this.card.cardTypeCode},isOnceCard:function(){return"D_AONETIMECARD"===this.card.cardTypeCode}},filters:{disFormat:function(t){return t.toFixed(1)}}},D=k,O=(i("222d"),Object(_["a"])(D,L,T,!1,null,"31a8063c",null));O.options.__file="coupon.vue";var E=O.exports,I={props:{cardList:Array,cardState:Number,reload:Function},components:{coupon:E},data:function(){return{}},methods:{refresh:function(t){this.reload()}},computed:{coupons:function(){var t=this,e=[];return this.cardList&&this.cardList.forEach(function(e){e.state=t.cardState}),e=this.cardList,e}}},$=I,N=(i("bb3f"),Object(_["a"])($,x,y,!1,null,"37c5b64e",null));N.options.__file="couponList.vue";var R=N.exports,j=i("5fb8"),U={components:{"van-tabs":d["a"],"van-tab":l["a"],"van-list":r["a"],MyVouchers:w,couponList:R,"van-pull-refresh":o["a"],empty:j["a"]},data:function(){return{pageNum:1,pageSize:10,loading:!1,finished:!1,isLoading:!1,showEmpty:!1,tabList:[{tabType:0,nameEn:"unUsed",nameCn:"未使用",state:"D_VALCARDHACED"},{tabType:1,nameEn:"used",nameCn:"已使用",state:"D_VALCARDUSEED"},{tabType:2,nameEn:"expired",nameCn:"已过期",state:"D_VALCARDOVERD"}],tabActive:0,cardList:[]}},methods:{tabClick:function(t,e){this.tabActive!==e&&(this.tabActive=e,this.pageNum=1,this.finished=!1,this.showEmpty=!1,this.cardList=[],this.handleCarList())},getCardList:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={pageNum:this.pageNum,pageSize:this.pageSize,statusCode:this.tabList[this.tabActive].state},t.abrupt("return",v["o"].userVouchersList(e));case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onRefresh:function(){this.handleCarList()},handleCarList:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.pageNum=1,this.loading=!0,t.next=4,this.getCardList();case 4:e=t.sent,this.cardList=e.list,this.cardList&&this.cardList.length>0?this.finished=!(this.cardList.length<e.total):(this.finished=!0,this.showEmpty=!0),this.loading=!1,this.isLoading=!1;case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loadMore:function(){var t=this;setTimeout(Object(c["a"])(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.finished){e.next=7;break}return Object(n["a"])("没有更多了~"),t.loading=!1,t.isLoading=!1,e.abrupt("return");case 7:return t.pageNum+=1,e.next=10,t.getCardList();case 10:i=e.sent,t.cardList=t.cardList.concat(i.list),t.cardList.length<i.total?t.finished=!1:t.finished=!0,t.loading=!1,t.isLoading=!1;case 15:t.cardList&&0!=t.cardList.length||(t.showEmpty=!0);case 16:case"end":return e.stop()}},e,this)})),100)},onInit:function(){this.handleCarList()},routeLink:function(){this.$router.replace("/vouchers-list")}},created:function(){this.onInit()}},B=U,W=(i("2ae2"),Object(_["a"])(B,s,a,!1,null,"7b90a971",null));W.options.__file="my-vouchers.vue";e["default"]=W.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fb92bee"],{"1d94":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container"},[e("div",{staticClass:"head-comment flex-box"},[e("div",{staticClass:"head-comment-label fs28"},[t._v("评价")]),e("div",{staticClass:"head-comment-star"},[e("van-rate",{attrs:{disabled:"",size:18,count:5,"disabled-color":"#D5AF6E",color:"#D5AF6E","void-color":"#D5AF6E"},model:{value:t.score,callback:function(i){t.score=i},expression:"score"}})],1)]),e("div",{staticClass:"comment-main"},[e("van-list",{attrs:{"immediate-check":!1,finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},[e("van-pull-refresh",{attrs:{"head-height":100},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(i){t.isLoading=i},expression:"isLoading"}},[e("ul",{staticClass:"comment-list"},t._l(t.comments,function(i,s){return e("li",{staticClass:"comment-list-item"},[e("div",{staticClass:"comment-user flex-between"},[e("div",{staticClass:"comment-user-left"},[e("span",{staticClass:"fs26B"},[t._v(t._s(s+i.usrName))]),e("span",{staticClass:"comment-vip"},[t._v(t._s(i.vipLevelName))])]),e("div",{staticClass:"comment-user-right fs24"},[t._v(t._s(t._f("filterDate")(i.commentTime)))])]),e("div",{staticClass:"comment-text fs24"},[t._v(t._s(i.commentMemo))]),i.thumbsVos&&i.thumbsVos.length>0?e("ul",{staticClass:"comment-img-list flex-box flex-wrap"},t._l(i.thumbsVos,function(s,o){return e("li",{staticClass:"comment-img-item"},[e("img",{attrs:{src:t.getImg(s.url),alt:"评价缩略图"},on:{error:function(i){t.errImg(i)},click:function(e){t.bigPic(i.thumbsVos,o)}}})])})):t._e(),i.answerCommentmo?e("p",{staticClass:"comment-reply fs24"},[t._v("回复："+t._s(i.answerCommentmo)+" ")]):t._e()])})),e("empty",{directives:[{name:"show",rawName:"v-show",value:t.showEmpty,expression:"showEmpty"}],attrs:{emptyText:"暂无评价~"}})],1)],1)],1),e("van-popup",{staticClass:"comment-detail",attrs:{overlay:!0},model:{value:t.showBigPic,callback:function(i){t.showBigPic=i},expression:"showBigPic"}},[e("van-swipe",{attrs:{"initial-swipe":t.bannerIndex,loop:!1}},t._l(t.bigPics,function(i,s){return e("van-swipe-item",{key:s},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImg(i),expression:"getImg(image)"}]})])}))],1)],1)},o=[],n=(e("ac6a"),e("ab71"),e("58e6")),a=(e("4b0a"),e("2bb1")),c=(e("7844"),e("5596")),r=(e("8a58"),e("e41f")),u=(e("2994"),e("2bdd")),h=(e("4142"),e("39d1")),l=(e("2b61"),e("22ce")),d=e("5fb8"),m={components:{"van-rate":h["a"],"van-list":u["a"],"van-popup":r["a"],"van-swipe":c["a"],"van-swipe-item":a["a"],"van-pull-refresh":n["a"],empty:d["a"]},data:function(){return{score:5,pageNum:1,pageSize:10,comments:[],loading:!1,isLoading:!1,showEmpty:!1,finished:!1,showBigPic:!1,bigPics:[],bannerIndex:0}},filters:{filterDate:function(t){return t&&t.length>10?t.substring(0,10):t}},methods:{bigPic:function(t,i){var e=[];t.forEach(function(t){t.url&&e.push(t.url)}),this.bigPics=e,this.showBigPic=!0,this.bannerIndex=i},onLoad:function(){this.finished||(this.pageNum++,this.getGoodsComments(),setTimeout(function(){},500))},onRefresh:function(){this.pageNum=1,this.comments=[],this.getGoodsComments()},getGoodsComments:function(){var t=this,i={goodsCode:this.goodsCode,pageNum:this.pageNum,pageSize:this.pageSize,busContsCode:baseConstant.busContsCode};l["e"].getGoodsComments(i).then(function(i){i.list&&i.list.length>0?i.list.forEach(function(i){t.comments.push(i)}):t.showEmpty=!0,i.pages<=t.pageNum&&(t.finished=!0)}).then(function(){t.loading=!1,t.isLoading=!1})},getGoodsScore:function(){var t=this,i={pageNum:this.pageNum,pageSize:this.pageSize,goodsCode:this.goodsCode,busContsCode:baseConstant.busContsCode};l["e"].getGoodsScore(i).then(function(i){t.score=i})}},created:function(){this.goodsCode=this.$route.query.goodsCode,this.getGoodsComments(),this.getGoodsScore()}},f=m,p=(e("7291"),e("2877")),v=Object(p["a"])(f,s,o,!1,null,"6d42e88c",null);v.options.__file="good-comment.vue";i["default"]=v.exports},"2bb1":function(t,i,e){"use strict";var s=e("fe7e");i["a"]=Object(s["a"])({render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{class:t.b(),style:t.style},[t._t("default")],2)},name:"swipe-item",data:function(){return{offset:0}},computed:{style:function(){var t=this.$parent,i=t.vertical,e=t.computedWidth,s=t.computedHeight;return{width:e+"px",height:i?s+"px":"100%",transform:"translate"+(i?"Y":"X")+"("+this.offset+"px)"}}},beforeCreate:function(){this.$parent.swipes.push(this)},destroyed:function(){this.$parent.swipes.splice(this.$parent.swipes.indexOf(this),1)}})},"39d1":function(t,i,e){"use strict";var s=e("fe7e");i["a"]=Object(s["a"])({render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{class:t.b(),on:{touchmove:t.onTouchMove}},t._l(t.list,function(i,s){return e("svg",{class:t.b("item"),style:t.style,attrs:{fill:t.disabled?t.disabledColor:i?t.color:t.voidColor,viewBox:"0 0 32 32","data-index":s},on:{click:function(i){t.onSelect(s)}}},[e("path",{attrs:{d:i?"M32 12.408l-11.056-1.607-4.944-10.018-4.944 10.018-11.056 1.607 8 7.798-1.889 11.011 9.889-5.199 9.889 5.199-1.889-11.011 8-7.798z":"M32 12.408l-11.056-1.607-4.944-10.018-4.944 10.018-11.056 1.607 8 7.798-1.889 11.011 9.889-5.199 9.889 5.199-1.889-11.011 8-7.798zM16 23.547l-6.983 3.671 1.334-7.776-5.65-5.507 7.808-1.134 3.492-7.075 3.492 7.075 7.807 1.134-5.65 5.507 1.334 7.776-6.983-3.671z"}})])}))},name:"rate",props:{readonly:Boolean,disabled:Boolean,size:{type:Number,default:20},color:{type:String,default:"#ffd21e"},voidColor:{type:String,default:"#c7c7c7"},disabledColor:{type:String,default:"#bdbdbd"},count:{type:Number,default:5},value:{type:Number,default:0}},computed:{style:function(){return{width:this.size+"px"}},list:function(){var t=this;return Array.apply(null,{length:this.count}).map(function(i,e){return e<t.value})}},methods:{onSelect:function(t){this.disabled||this.readonly||(this.$emit("input",t+1),this.$emit("change",t+1))},onTouchMove:function(t){if(document.elementFromPoint){t.preventDefault();var i=t.touches[0],e=i.clientX,s=i.clientY,o=document.elementFromPoint(e,s);if(o&&o.dataset){var n=o.dataset.index;n&&this.onSelect(+n)}}}}})},4142:function(t,i,e){"use strict";e("5548"),e("a085")},4519:function(t,i,e){},"4b0a":function(t,i,e){"use strict";e("5548")},5596:function(t,i,e){"use strict";var s=e("fe7e"),o=e("3875"),n=e("db78");i["a"]=Object(s["a"])({render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{class:t.b()},[e("div",{class:t.b("track"),style:t.trackStyle,on:{touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd,touchcancel:t.onTouchEnd,transitionend:function(i){t.$emit("change",t.activeIndicator)}}},[t._t("default")],2),t._t("indicator",[t.showIndicators&&t.count>1?e("div",{class:t.b("indicators",{vertical:t.vertical})},t._l(t.count,function(i){return e("i",{class:t.b("indicator",{active:i-1===t.activeIndicator})})})):t._e()])],2)},name:"swipe",mixins:[o["a"]],props:{width:Number,height:Number,autoplay:Number,vertical:Boolean,loop:{type:Boolean,default:!0},touchable:{type:Boolean,default:!0},initialSwipe:{type:Number,default:0},showIndicators:{type:Boolean,default:!0},duration:{type:Number,default:500}},data:function(){return{computedWidth:0,computedHeight:0,offset:0,active:0,deltaX:0,deltaY:0,swipes:[],swiping:!1}},mounted:function(){this.initialize(),this.$isServer||Object(n["b"])(window,"resize",this.onResize,!0)},destroyed:function(){this.clear(),this.$isServer||Object(n["a"])(window,"resize",this.onResize,!0)},watch:{swipes:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t?this.autoPlay():this.clear()}},computed:{count:function(){return this.swipes.length},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},trackStyle:function(){var t,i=this.vertical?"height":"width",e=this.vertical?"width":"height";return t={},t[i]=this.trackSize+"px",t[e]=this[e]?this[e]+"px":"",t.transitionDuration=(this.swiping?0:this.duration)+"ms",t.transform="translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)",t}},methods:{initialize:function(t){if(void 0===t&&(t=this.initialSwipe),clearTimeout(this.timer),this.$el){var i=this.$el.getBoundingClientRect();this.computedWidth=this.width||i.width,this.computedHeight=this.height||i.height}this.swiping=!0,this.active=t,this.offset=this.count>1?-this.size*this.active:0,this.swipes.forEach(function(t){t.offset=0}),this.autoPlay()},onResize:function(){this.initialize(this.activeIndicator)},onTouchStart:function(t){this.touchable&&(this.clear(),this.swiping=!0,this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),(this.vertical&&"vertical"===this.direction||"horizontal"===this.direction)&&(t.preventDefault(),t.stopPropagation(),this.move(0,Math.min(Math.max(this.delta,-this.size),this.size))))},onTouchEnd:function(){if(this.touchable&&this.swiping){if(this.delta){var t=this.vertical?this.offsetY:this.offsetX;this.move(t>50?this.delta>0?-1:1:0)}this.swiping=!1,this.autoPlay()}},move:function(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var e=this.delta,s=this.active,o=this.count,n=this.swipes,a=this.trackSize,c=0===s,r=s===o-1,u=!this.loop&&(c&&(i>0||t<0)||r&&(i<0||t>0));u||o<=1||(n[0].offset=r&&(e<0||t>0)?a:0,n[o-1].offset=c&&(e>0||t<0)?-a:0,t&&s+t>=-1&&s+t<=o&&(this.active+=t),this.offset=i-this.active*this.size)},swipeTo:function(t){var i=this;this.swiping=!0,this.correctPosition(),setTimeout(function(){i.swiping=!1,i.move(t%i.count-i.active)},30)},correctPosition:function(){this.active<=-1&&this.move(this.count),this.active>=this.count&&this.move(-this.count)},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,i=this.autoplay;i&&this.count>1&&(this.clear(),this.timer=setTimeout(function(){t.swiping=!0,t.resetTouchStatus(),t.correctPosition(),setTimeout(function(){t.swiping=!1,t.move(1),t.autoPlay()},30)},i))}}})},"55ff":function(t,i,e){},7291:function(t,i,e){"use strict";var s=e("4519"),o=e.n(s);o.a},7844:function(t,i,e){"use strict";e("5548"),e("55ff")},a085:function(t,i,e){}}]);
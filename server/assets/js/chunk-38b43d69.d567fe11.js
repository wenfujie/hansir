(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38b43d69"],{"2bb1":function(t,o,e){"use strict";var i=e("fe7e");o["a"]=Object(i["a"])({render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{class:t.b(),style:t.style},[t._t("default")],2)},name:"swipe-item",data:function(){return{offset:0}},computed:{style:function(){var t=this.$parent,o=t.vertical,e=t.computedWidth,i=t.computedHeight;return{width:e+"px",height:o?i+"px":"100%",transform:"translate"+(o?"Y":"X")+"("+this.offset+"px)"}}},beforeCreate:function(){this.$parent.swipes.push(this)},destroyed:function(){this.$parent.swipes.splice(this.$parent.swipes.indexOf(this),1)}})},"4b0a":function(t,o,e){"use strict";e("5548")},5596:function(t,o,e){"use strict";var i=e("fe7e"),s=e("3875"),n=e("db78");o["a"]=Object(i["a"])({render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{class:t.b()},[e("div",{class:t.b("track"),style:t.trackStyle,on:{touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd,touchcancel:t.onTouchEnd,transitionend:function(o){t.$emit("change",t.activeIndicator)}}},[t._t("default")],2),t._t("indicator",[t.showIndicators&&t.count>1?e("div",{class:t.b("indicators",{vertical:t.vertical})},t._l(t.count,function(o){return e("i",{class:t.b("indicator",{active:o-1===t.activeIndicator})})})):t._e()])],2)},name:"swipe",mixins:[s["a"]],props:{width:Number,height:Number,autoplay:Number,vertical:Boolean,loop:{type:Boolean,default:!0},touchable:{type:Boolean,default:!0},initialSwipe:{type:Number,default:0},showIndicators:{type:Boolean,default:!0},duration:{type:Number,default:500}},data:function(){return{computedWidth:0,computedHeight:0,offset:0,active:0,deltaX:0,deltaY:0,swipes:[],swiping:!1}},mounted:function(){this.initialize(),this.$isServer||Object(n["b"])(window,"resize",this.onResize,!0)},destroyed:function(){this.clear(),this.$isServer||Object(n["a"])(window,"resize",this.onResize,!0)},watch:{swipes:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t?this.autoPlay():this.clear()}},computed:{count:function(){return this.swipes.length},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},trackStyle:function(){var t,o=this.vertical?"height":"width",e=this.vertical?"width":"height";return t={},t[o]=this.trackSize+"px",t[e]=this[e]?this[e]+"px":"",t.transitionDuration=(this.swiping?0:this.duration)+"ms",t.transform="translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)",t}},methods:{initialize:function(t){if(void 0===t&&(t=this.initialSwipe),clearTimeout(this.timer),this.$el){var o=this.$el.getBoundingClientRect();this.computedWidth=this.width||o.width,this.computedHeight=this.height||o.height}this.swiping=!0,this.active=t,this.offset=this.count>1?-this.size*this.active:0,this.swipes.forEach(function(t){t.offset=0}),this.autoPlay()},onResize:function(){this.initialize(this.activeIndicator)},onTouchStart:function(t){this.touchable&&(this.clear(),this.swiping=!0,this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),(this.vertical&&"vertical"===this.direction||"horizontal"===this.direction)&&(t.preventDefault(),t.stopPropagation(),this.move(0,Math.min(Math.max(this.delta,-this.size),this.size))))},onTouchEnd:function(){if(this.touchable&&this.swiping){if(this.delta){var t=this.vertical?this.offsetY:this.offsetX;this.move(t>50?this.delta>0?-1:1:0)}this.swiping=!1,this.autoPlay()}},move:function(t,o){void 0===t&&(t=0),void 0===o&&(o=0);var e=this.delta,i=this.active,s=this.count,n=this.swipes,a=this.trackSize,c=0===i,d=i===s-1,r=!this.loop&&(c&&(o>0||t<0)||d&&(o<0||t>0));r||s<=1||(n[0].offset=d&&(e<0||t>0)?a:0,n[s-1].offset=c&&(e>0||t<0)?-a:0,t&&i+t>=-1&&i+t<=s&&(this.active+=t),this.offset=o-this.active*this.size)},swipeTo:function(t){var o=this;this.swiping=!0,this.correctPosition(),setTimeout(function(){o.swiping=!1,o.move(t%o.count-o.active)},30)},correctPosition:function(){this.active<=-1&&this.move(this.count),this.active>=this.count&&this.move(-this.count)},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,o=this.autoplay;o&&this.count>1&&(this.clear(),this.timer=setTimeout(function(){t.swiping=!0,t.resetTouchStatus(),t.correctPosition(),setTimeout(function(){t.swiping=!1,t.move(1),t.autoPlay()},30)},o))}}})},"55ff":function(t,o,e){},7844:function(t,o,e){"use strict";e("5548"),e("55ff")},"8a12":function(t,o,e){"use strict";var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div")},s=[],n=(e("e7e5"),e("d399")),a=e("22ce"),c={data:function(){return{}},created:function(){this.ms_tabList=[{id:1,title:"中英文绣字",type:"D_EMBTYPE_FONT"},{id:2,title:"星座刺绣",type:"D_EMBTYPE_EMBPIC"}],this.ms_tabListLength=this.ms_tabList.length,this.ms_goodsType=this.$route.query.goodsType},methods:{ms_getUseablePart:function(t,o){var e={type:t.type,ptiPartHdId:this.goodDetail.ptiPartHdId};return a["e"].getUseablePart(e)},ms_checkoutGoodSell:function(t){var o=this,e=(this.$route.query.goodsType,{buscontsCode:baseConstant.busContsCode});return"groupGoods"===this.ms_goodsType?e.combGoodsCodeList=this.groupGoodDetail.ptiCombgoodHdCode:e.partGoodsCodeList=this.goodDetail.goodCode,t&&(1==this.buyType||3==this.buyType?(e.partGoodsCodeList=this.goodDetail.goodCode,delete e.combGoodsCodeList):(e.combGoodsCodeList=this.groupGoodDetail.ptiCombgoodHdCode,delete e.partGoodsCodeList)),a["e"].getGoodSellState(e).then(function(t){t.combGoodsList&&t.combGoodsList.length?0==t.combGoodsList[0].sellFlag?(o.ms_isUnSell=!0,Object(n["a"])("该商品已下架")):o.ms_isUnSell=!1:0==t.partGoodsList[0].sellFlag?(o.ms_isUnSell=!0,Object(n["a"])("该商品已下架")):o.ms_isUnSell=!1})}}},d=c,r=e("2877"),l=Object(r["a"])(d,i,s,!1,null,null,null);l.options.__file="ComGoodEmbData.vue";o["a"]=l.exports},"962d":function(t,o,e){},b441:function(t,o,e){},ba3a:function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"container"},[i("div",{staticClass:"good-info"},[i("div",{staticClass:"good-info-banner"},[i("div",{staticClass:"good-head-icon"},[i("i",{staticClass:"iconfont icon-fanhuishouye",on:{click:function(o){t.goPage("/show")}}})]),i("van-swipe",{attrs:{autoplay:3e3},on:{change:t.onChange}},[t._l(t.goodDetail.urlList,function(o,e){return i("van-swipe-item",{key:e},[i("div",{staticClass:"good-banner-img"},[i("img",{attrs:{src:t.getImg(o.url),alt:""},on:{error:function(o){t.errImg(o)}}})])])}),t.goodDetail.urlList&&t.goodDetail.urlList.length>1?i("div",{staticClass:"custom-indicator",attrs:{slot:"indicator"},slot:"indicator"},[i("ul",{staticClass:"custom-list"},t._l(t.goodDetail.urlList,function(o,e){return i("li",{key:e,class:["custom-item",{selected:t.currentIndex===e}]})}))]):t._e()],2)],1),i("div",{staticClass:"good-info-detail pd30"},[i("div",{staticClass:"good-info-title fs32"},[t._v(t._s(t.goodDetail.goodName))]),i("div",{staticClass:"good-info-price"},[i("div",{staticClass:"flex-box"},[i("p",{staticClass:"fs32B"},[t._v("¥"+t._s(t._f("$goldDivide")(t.goodDetail.salePrice)))]),t.goodDetail.tagPrice?i("p",{staticClass:"fs28 good-tagprice"},[t._v("¥"+t._s(t._f("$goldDivide")(t.goodDetail.tagPrice)))]):t._e()]),t.goodDetail.sellPointDesc?i("p",{staticClass:"good-info-describe"},[t._v(t._s(t.goodDetail.sellPointDesc))]):t._e()])])]),i("div",{staticClass:"good-expand"},[i("ul",{staticClass:"expand-list"},[t.showVouchersLinkFlag?i("li",{staticClass:"pdLr30 expand-item good-expand-discounts",on:{click:function(o){t.goPage("/vouchers-list")}}},[i("p",{staticClass:"pdLr10 discounts-logo"},[t._v("优惠")]),i("p",{staticClass:"flex-auto fs28 pdLr30 discounts-link"},[t._v("购礼品卡/体验卡可获得更多礼品与优惠")]),i("p",{staticClass:"iconfont icon-gengduo"})]):t._e(),"singleGood"===t.goodsType&&t.recommendPackages.length>0?i("li",{staticClass:"expand-item good-expand-recom"},[i("p",{staticClass:"fs28 pdB30 recom-title"},[t._v("推荐套餐")]),i("ul",{staticClass:"recom-list"},t._l(t.recommendPackages,function(o,s){return i("li",{key:o.ptiCombgoodHdCode,class:["mgB30","recom-item",{selected:!1}],on:{click:function(e){t.goPage("/goods-detail?goodsCode="+o.ptiCombgoodHdCode+"&goodsType=groupGoods")}}},[i("span",{staticClass:"fs26B recom-item-price"},[t._v("￥"+t._s(t._f("$goldDivide")(o.salePrice)))]),i("span",{staticClass:"fs24 recom-item-num"},[t._v("/"+t._s(o.customName))]),i("div",{staticClass:"recommen-logo"},[i("img",{attrs:{src:e("f583"),alt:""}})])])}))]):t._e(),t.presentPointer&&t.presentPointer>0?i("li",{staticClass:"pdLr30 expand-item good-expand-pointer"},[i("p",{staticClass:"pointer-logo"},[t._v("积")]),i("p",{staticClass:"fs28 pointer-describe"},[t._v("购买最多获得"+t._s(t.presentPointer)+"积分，积分可兑换现金券")])]):t._e()])]),i("div",{staticClass:"good-interval"}),i("div",{staticClass:"detail-content"},t._l(t.goodsContent,function(o,e){return i("div",{key:e,staticClass:"detail-content-tab"},[i("p",{staticClass:"tab-title",class:{maincolor:!0===o.showContent},on:{click:function(t){o.showContent=!o.showContent}}},[t._v("- "+t._s(o.descName)+" -")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===o.showContent,expression:"item.showContent === true"}],staticClass:"tab-content",domProps:{innerHTML:t._s(o.descContent)}})])})),i("div",{staticClass:"good-cut"}),i("van-popup",{attrs:{position:"bottom"},model:{value:t.showCustom,callback:function(o){t.showCustom=o},expression:"showCustom"}},[i("div",{staticClass:"pd30 good-custom-pop"},[i("div",{staticClass:"pay-one-good"},[i("div",{staticClass:"pay-one-img"},[t.goodDetail.urlList&&t.goodDetail.urlList[0]?i("img",{attrs:{src:t.getImg(t.goodDetail.urlList[0].url),alt:""},on:{error:function(o){t.errImg(o)}}}):t._e(),i("div",{staticClass:"pay-one-type"},[t._v("定制")])]),i("div",{staticClass:"pay-one-info flex-vbox flex-auto"},[i("div",{staticClass:"pay-one-cont"},[i("div",{staticClass:"pay-one-money fs28B"},[t._v("¥"+t._s(t._f("$goldDivide")(t.goodDetail.salePrice)))]),t.goodDetail.sellPointDesc?i("span",{staticClass:"good-info-describe-pup"},[t._v(t._s(t.goodDetail.sellPointDesc))]):t._e()])])]),i("div",{staticClass:"good-pop-recom"},[i("p",{staticClass:"fs28 pdB30 pop-recom-title"},[t._v("套餐选择")]),i("ul",{staticClass:"mgB30 pop-recom-list"},t._l(t.buyablePackagesList,function(o,e){return i("li",{key:e,class:["pop-recom-item",{selected:t.recommenIndex===e,disabled:!o.qty||0==o.qty}],on:{click:function(i){t.selectPackages(o,e)}}},[i("span",{staticClass:"fs26B pop-recom-item-price"},[t._v("￥"+t._s(t._f("$goldDivide")(o.salePrice)))]),i("span",{staticClass:"fs24 pop-recom-item-num"},[t._v("/"+t._s(o.customName))])])}))]),i("div",{staticClass:"good-stepper"},[i("p",{staticClass:"fs28 pdB30"},[t._v("数量选择")]),i("div",{staticClass:"good-stepper-container"},[i("van-stepper",{attrs:{integer:"",min:1,step:1,disabled:t.recommenIndex<0},on:{change:t.changeStepper},model:{value:t.amount,callback:function(o){t.amount=o},expression:"amount"}})],1)]),t.buyablePackagesInfo.maxPrice>0?i("div",{staticClass:"good-tip"},[i("p",{staticClass:"good-tip-logo"},[t._v("提示")]),i("p",{staticClass:"fs24 good-tip-cont"},[t._v("购买 ["+t._s(t.buyablePackagesInfo.maxCombo)+"] 最高优惠￥"+t._s(t._f("$goldDivide")(t.buyablePackagesInfo.maxPrice))+"元。")])]):t._e()]),i("div",{staticClass:"good-sure-btn",on:{click:t.clickSureBtn}},[t._v("确定")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"shade-style"},[i("div",{staticClass:"loading-style"},[i("van-loading",{attrs:{type:"spinner",color:"white"}})],1)]),i("div",{staticClass:"good-action"},[i("ul",{staticClass:"good-action-list"},[i("li",{staticClass:"good-action-item",on:{click:t.concatCumService}},[i("i",{staticClass:"iconfont icon-kefu"}),i("span",{staticClass:"good-action-text"},[t._v("咨询")])]),"singleGood"===t.goodsType?i("li",{staticClass:"good-action-item",on:{click:function(o){t.goPage("/goods-comment?goodsCode="+t.goodsCode)}}},[i("i",{staticClass:"iconfont icon-pinglun"}),i("span",{staticClass:"good-action-text"},[t._v("评价")])]):t._e(),i("li",{staticClass:"good-action-item",on:{click:t.collectOrCancel}},[i("i",{class:["iconfont",,"icon-shoucang",{"iconclickCustom-shoucangxuanzhong":t.isCollect,"collect-color":t.isCollect}]}),i("span",{staticClass:"good-action-text"},[t._v(t._s(t.isCollect?"已收藏":"收藏"))])])]),i("div",{staticClass:"good-action-btn",on:{click:function(o){t.clickCustom()}}},[t._v("立即定制")])])],1)},s=[],n=(e("a481"),e("ac6a"),e("e7e5"),e("d399")),a=(e("ac1e"),e("543e")),c=(e("8a58"),e("e41f")),d=(e("5548"),e("b441"),e("fe7e")),r=Object(d["a"])({render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{class:t.b()},[e("button",{class:t.b("minus",{disabled:t.minusDisabled}),on:{click:function(o){t.onChange("minus")}}}),e("input",{class:t.b("input"),attrs:{type:"number",disabled:t.disabled||t.disableInput},domProps:{value:t.currentValue},on:{input:t.onInput,blur:t.onBlur}}),e("button",{class:t.b("plus",{disabled:t.plusDisabled}),on:{click:function(o){t.onChange("plus")}}})])},name:"stepper",props:{value:null,integer:Boolean,disabled:Boolean,disableInput:Boolean,min:{type:[String,Number],default:1},max:{type:[String,Number],default:1/0},step:{type:[String,Number],default:1},defaultValue:{type:[String,Number],default:1}},data:function(){var t=this.range(this.isDef(this.value)?this.value:this.defaultValue);return t!==+this.value&&this.$emit("input",t),{currentValue:t}},computed:{minusDisabled:function(){return this.disabled||this.currentValue<=this.min},plusDisabled:function(){return this.disabled||this.currentValue>=this.max}},watch:{value:function(t){t!==this.currentValue&&(this.currentValue=this.format(t))},currentValue:function(t){this.$emit("input",t),this.$emit("change",t)}},methods:{format:function(t){return t=String(t).replace(/[^0-9\.-]/g,""),""===t?0:this.integer?Math.floor(t):+t},range:function(t){return Math.max(Math.min(this.max,this.format(t)),this.min)},onInput:function(t){var o=t.target.value,e=this.format(o);+o!==e&&(t.target.value=e),this.currentValue=e},onChange:function(t){if(this[t+"Disabled"])this.$emit("overlimit",t);else{var o="minus"===t?-this.step:+this.step,e=Math.round(100*(this.currentValue+o))/100;this.currentValue=this.range(e),this.$emit(t)}},onBlur:function(t){this.currentValue=this.range(this.currentValue),this.$emit("blur",t)}}}),l=e("9584"),u=Object(d["a"])({render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"van-hairline",class:t.b(),on:{click:t.onClick}},[e("icon",{class:[t.b("icon"),t.iconClass],attrs:{info:t.info,name:t.icon}}),t._t("default",[t._v(t._s(t.text))])],2)},name:"goods-action-mini-btn",mixins:[l["a"]],props:{text:String,info:[String,Number],icon:String,iconClass:String},methods:{onClick:function(t){this.$emit("click",t),this.routerLink()}}}),h=e("b650"),g=Object(d["a"])({render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("van-button",{class:t.b(),attrs:{square:"",size:"large",loading:t.loading,disabled:t.disabled,type:t.primary?"danger":"warning"},on:{click:t.onClick}},[t._t("default",[t._v(t._s(t.text))])],2)},name:"goods-action-big-btn",mixins:[l["a"]],components:{VanButton:h["a"]},props:{text:String,primary:Boolean,loading:Boolean,disabled:Boolean},methods:{onClick:function(t){this.$emit("click",t),this.routerLink()}}}),p=(e("c50d"),Object(d["a"])({render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{class:t.b()},[t._t("default")],2)},name:"goods-action"})),f=(e("4b0a"),e("2bb1")),m=(e("7844"),e("5596")),C=e("22ce"),b=e("2b61"),v=e("8a12"),I={components:{"van-swipe":m["a"],"van-swipe-item":f["a"],"van-goods-action":p,"van-goods-action-big-btn":g,"van-goods-action-mini-btn":u,"van-stepper":r,"van-popup":c["a"],"van-loading":a["a"]},mixins:[v["a"]],data:function(){return{currentIndex:0,goodDetail:{},groupGoodDetail:{},goodsContent:[],recommenIndex:-1,showCustom:!1,showVouchersLinkFlag:!1,amount:1,presentPointer:0,recommendPackages:[],buyablePackagesInfo:{},buyablePackagesList:[],isLoading:!1,useablePart:[]}},computed:{isCollect:function(){return 1==this.goodDetail.collectionFlag},buyType:function(){return"singleGood"===this.goodsType?this.buyablePackagesList.length>0?this.recommenIndex>0?2:0==this.recommenIndex?3:5:1:4}},methods:{changeStepper:function(t){this.checkoutStockPromise().then(function(t){1==t.enoughAll||Object(n["a"])("库存不足~")})},clickSureBtn:function(){this.recommenIndex<0?Object(n["a"])("请选择套餐~"):this.checkoutStock()},clickCustom:function(){if(this.ms_isUnSell)Object(n["a"])("该商品已下架");else if(checkoutAuthorized(this.$route.fullPath,this)){var t=this.buyType;switch(!0){case 2==t:case 3==t:case 5==t:this.showCustom=!0;break;case 1==t:this.checkoutStock();break;case 4==t:this.checkoutStock();break}}},selectPackages:function(t,o){var e=this;t.qty&&0!=t.qty&&(this.recommenIndex=o,this.amount=1,o>0&&this.getGroupGoodsInfoPromise(this.buyablePackagesList[o].ptiCombgoodHdCode).then(function(t){e.groupGoodDetail=t}))},checkoutUsableVlaueCard:function(){var t=this,o={dptId:b["a"].get("properties").shopId};"groupGoods"===this.goodsType?o.combPartCode=this.goodDetail.ptiCombgoodHdCode:o.ptiPartCode=this.goodDetail.goodCode,C["o"].getGoodUsableVlaueCard(o).then(function(o){o&&o.length>0?t.showVouchersLinkFlag=!0:t.showVouchersLinkFlag=!1})},getGoodsInfoTitle:function(){var t=this,o={goodsId:this.goodDetail.orderGoodsId};C["e"].getGoodsTitle(o).then(function(o){t.descContentDispose(o)})},descContentDispose:function(t){!t||t.length<=0||(t.forEach(function(t){t.showContent=!1,0==t.descSq&&(t.showContent=!0);var o=t.descContent.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,function(t,o){var e=o.indexOf("=")+1,i=getImg(o.substring(e,t.length));return'<img src="'+i+'" style="width:100%">'});t.descContent=o}),t.forEach(function(t){var o=t.descContent.replace(/\<pre\>/gi,function(){return'<pre style="word-wrap: break-word;white-space:pre-wrap;">'});t.descContent=o}),t.forEach(function(t){var o=t.descContent.replace(/\<p\>/gi,function(){return'<p style="word-wrap: break-word;white-space:pre-wrap;">'});t.descContent=o}),this.goodsContent=t)},collectOrCancel:function(){var t=this,o=function(){t.isCollect?t.cancelCollectFunction():t.collectFunction()};this.checkoutUserInfo(o)},cancelCollectFunction:function(){var t=this,o={};if("groupGoods"===this.goodsType)return o={usrId:b["a"].get("USER_INFO").usrId,ownCompanyId:b["a"].get("COMPANYID").company_id,companyId:b["a"].get("COMPANYID").company_id,id:this.goodDetail.rtlCollectionDtId},void C["c"].deleteCollectionComb(o).then(function(o){t.getGroupGoodsInfo()});o={usrId:b["a"].get("USER_INFO").usrId,companyId:b["a"].get("COMPANYID").company_id,goodCodeStr:this.goodsCode,ids:this.goodDetail.rtlCollectionDtId},C["c"].deleteCollection(o).then(function(o){t.getGoodsInfo()})},collectFunction:function(){var t=this,o={};if("groupGoods"===this.goodsType)return o={usrId:b["a"].get("USER_INFO").usrId,ownCompanyId:b["a"].get("COMPANYID").company_id,companyId:b["a"].get("COMPANYID").company_id,busContsCode:baseConstant.busContsCode,ptiCombgoodHdCode:this.goodDetail.ptiCombgoodHdCode,shopId:b["a"].get("USER_INFO").shopId},void C["c"].addCollectionComb(o).then(function(o){t.getGroupGoodsInfo()});o={usrId:b["a"].get("USER_INFO").usrId,companyId:b["a"].get("COMPANYID").company_id,busContsCode:baseConstant.busContsCode,goodsCode:this.goodsCode,shopId:b["a"].get("USER_INFO").shopId},C["c"].addCollection(o).then(function(o){t.getGoodsInfo()})},goPage:function(t){this.$router.push(t)},onChange:function(t){this.currentIndex=t},getGoodsInfo:function(t){var o=this,e={busContsCode:baseConstant.busContsCode,partCode:this.goodsCode,shopId:b["a"].get("properties").shopId};C["e"].getGoodsInfoCus(e).then(function(t){var e=t.urlList;e&&0!=e.length||(t.urlList=[],t.urlList.push({url:"aa",fileId:""})),o.goodDetail=t}).then(function(){"function"==typeof t&&t()})},getGroupGoodsInfo:function(t){var o=this;this.getGroupGoodsInfoPromise(this.goodsCode).then(function(e){e.salePrice||(e.salePrice=0,e.goodsList.forEach(function(t){e.salePrice+=t.salePrice}),e.salePrice=e.salePrice.toFixed(2)),e.goodName=e.comgoodsName,e.urlList=[{url:e.pictFileUrl,fileId:""}],o.descContentDispose(e.descList),o.goodDetail=e,o.groupGoodDetail=e,"function"==typeof t&&t()})},getGroupGoodsInfoPromise:function(t){var o={busContsCode:baseConstant.busContsCode,ptiCombgoodHdCode:t,shopId:b["a"].get("properties").shopId};return C["e"].getGroupGoodsInfoCus(o)},getPresentPointer:function(){var t=this;C["j"].getComputePresentPointer({price:this.goodDetail.salePrice}).then(function(o){t.presentPointer=o})},getUserInfo:function(t){var o=this;C["m"].getUserInfo({usrId:b["a"].get("USER_INFO").usrId,companyId:b["a"].get("COMPANYID").company_id}).then(function(e){o.userInfo=e,"function"===typeof t&&t()})},concatCumService:function(){var t=this,o=function(){t.userInfo;contact()};this.checkoutUserInfo(o)},checkoutUserInfo:function(t){checkoutAuthorized(this.$route.fullPath,this)&&(this.userInfo?"function"===typeof t&&t():this.getUserInfo(t))},checkoutStock:function(){var t=this;if(!this.isSaveing){var o=function(){t.userInfo.mobilePhone?(t.isSaveing=!0,t.checkoutStockPromise().then(function(o){if(1==o.enoughAll)if(1==t.buyType||3==t.buyType)for(var e=0;e<t.ms_tabList.length;e++)t.ms_getUseablePart(t.ms_tabList[e],t.goodDetail.ptiPartHdId).then(function(o){if(o&&o.length){var e="/goods-embroider?goodsCode="+t.goodDetail.goodCode;t.useablePart.length||(t.useablePart=o,console.log(o,"adsdsa"),t.$router.push("/reserve?goodCodes=".concat(t.goodDetail.goodCode,"&successUrl=").concat(encodeURIComponent(e),"&amount=").concat(t.amount,"&unique_needCache=1")))}else t.ms_tabListLength--,0==t.ms_tabListLength&&t.buyRightNow()});else t.buyRightNow();else Object(n["a"])("库存不足~"),t.isSaveing=!1},function(o){t.isSaveing=!1})):t.$router.push("/bind-phone")};this.ms_checkoutGoodSell("isBuy").then(function(){t.ms_isUnSell||t.checkoutUserInfo(o)})}},checkoutStockPromise:function(){var t=this,o=[];1==this.buyType||3==this.buyType?o.push({count:this.amount,orderFlag:this.goodDetail.orderFlag,ptiPartDtSkuId:this.goodDetail.ptiPartSkuId,ptiPartHdCode:this.goodDetail.goodCode,ptiPartHdId:this.goodDetail.ptiPartHdId}):this.groupGoodDetail.goodsList.forEach(function(e){o.push({count:t.amount,orderFlag:e.orderFlag,ptiPartDtSkuId:e.ptiPartSkuId,ptiPartHdCode:e.goodCode,ptiPartHdId:e.ptiPartHdId})});var e={companyId:b["a"].get("COMPANYID").company_id,ownCompanyId:b["a"].get("COMPANYID").company_id,usrId:b["a"].get("USER_INFO").usrId,inventoryJudgeDtos:o,shopId:b["a"].get("properties").shopId};return C["e"].getGroupGoodsStockCust(e)},buyRightNow:function(){var t=this,o=this.getBuyParams();c_emitBill(o).then(function(o){var e="/order-settlement?orderHdId="+o,i="";1==t.buyType||3==t.buyType?i=t.goodDetail.goodCode:t.groupGoodDetail.goodsList.forEach(function(t){i+=(i?",":"")+t.goodCode}),t.$router.push("/reserve?goodCodes=".concat(i,"&successUrl=").concat(encodeURIComponent(e),"&unique_needCache=1")),t.isSaveing=!1},function(o){t.isSaveing=!1})},getBuyParams:function(){var t=this,o={companyId:b["a"].get("COMPANYID").company_id,usrId:b["a"].get("USER_INFO").usrId,ctmUsrId:b["a"].get("USER_INFO").usrId,cookieId:b["a"].get("USER_INFO").cookieId,shopCode:b["a"].get("USER_INFO").shopCode,usrKey:b["a"].get("USER_INFO").usrId,sourceCode:"D_ORDWEIN"},e=[];return 1==this.buyType||3==this.buyType?(e=this.getPartListParams(this.goodDetail.detailedList),o.skuList=[{mainFabricId:this.goodDetail.mainFabricId,amount:this.amount,colorCode:this.goodDetail.colorCode,dealPrice:"",sizeCode:this.goodDetail.sizeCode,salePrice:this.goodDetail.salePrice,tagPrice:this.goodDetail.tagPrice,goodsCode:this.goodDetail.goodCode,thumb:this.goodDetail.fileUrl,pictFileId:this.goodDetail.pictFileId,partList:e}],o.amountOrd=this.amount*this.goodDetail.salePrice):(o.combList=[{picFileHdId:this.groupGoodDetail.picFileHdId,ptiCombgoodHdId:this.groupGoodDetail.id,qty:this.amount,seq:1}],o.combList[0].skuList=[],this.groupGoodDetail.goodsList.forEach(function(i){e=t.getPartListParams(i.detailedList),o.combList[0].skuList.push({mainFabricId:i.mainFabricId,amount:t.amount,colorCode:i.colorCode,dealPrice:"",sizeCode:i.sizeCode,salePrice:i.salePrice,tagPrice:i.tagPrice,goodsCode:i.goodCode,pictFileId:i.pictFileId,partList:e})})),o},getPartListParams:function(t){return t.map(function(t){return{regionCode:t.regionCode,partCode:t.partCode,fabricCode:t.fabricCode,partId:t.partId,fabricId:t.fabricId,regionId:t.regionId,memo:"",emb:[],ept:[],prt:[],salePrice:"",tagPrice:""}})},getRecommendPackages:function(){var t=this,o={shopDptId:b["a"].get("properties").shopId,ptiPartHdId:this.goodDetail.ptiPartHdId};C["e"].getRecommendPackages(o).then(function(o){t.recommendPackages=o})},getBuyablePackages:function(t){var o=this,e={shopDptId:b["a"].get("properties").shopId,ptiPartHdId:this.goodDetail.ptiPartHdId,buscontsId:baseConstant.busContsCode};C["e"].getBuyablePackages(e).then(function(e){var i=e.list;i.dttList&&i.dttList.length>0&&(i.dttList.unshift({customName:i.customName,salePrice:i.salePrice,qty:i.qty}),o.buyablePackagesList=i.dttList),o.buyablePackagesInfo=e,"function"===typeof t&&t()})},initPage:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"singleGood";this.amount=1,this.recommenIndex=-1,this.isLoading=!0,this.goodsCode=this.$route.query.goodsCode,this.goodsType=o,this.ms_goodsType=o;var e=null;"groupGoods"===this.goodsType?(e=function(){t.getPresentPointer(),t.checkoutUsableVlaueCard(),t.ms_checkoutGoodSell(),t.isLoading=!1},this.getGroupGoodsInfo(e)):(e=function(){t.getGoodsInfoTitle(),t.getPresentPointer(),t.checkoutUsableVlaueCard(),t.getRecommendPackages(),t.ms_checkoutGoodSell(),t.getBuyablePackages(function(){t.isLoading=!1})},this.getGoodsInfo(e))}},created:function(){this.initPage(this.$route.query.goodsType)},watch:{$route:function(t){this.initPage(this.$route.query.goodsType)}}},y=I,P=(e("c4d0"),e("2877")),_=Object(P["a"])(y,i,s,!1,null,"2707aabf",null);_.options.__file="good-detail-yuyue.vue";o["default"]=_.exports},c4d0:function(t,o,e){"use strict";var i=e("962d"),s=e.n(i);s.a},c50d:function(t,o,e){},f583:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAqCAYAAAAqAaJlAAADoUlEQVRYR83XTUgbQRgG4DdGqmCt1qJBRVtLrYW2UiwoKAh68CB4UPCgiCCoNDeFgAcRIyIiBDzkEFEhBw8eBEUFjzlIe1DQNrb1r1WrVK1/NGK0sVW3zMAs2ewmu/lx3b2EaDb7zDfvNzPRAcB7g4Ejr1q+dBxn1gWLfVRRgb8HBzibn1dtbARadHjYFRSWQHNsNvy0WrHT16cKlkHJw2Sx8fn5cC8sIKm8nEL3hobwo6tLdags9p7BgLdzc3AvLSE+L08ETampgcvhoLGI9OVdUfbdspXN6u5GWlMT/mxs4GNxMbjra3pv2rt3yDKb8a21FYejoxG1SkFlK8sy+tvhwMPSUmyZzdgfHuah5P3ewIAq0IBYBmUZZdlNbWqiFWVQUmHu6ooOItzLX0UlY8CWJZJVqWZiU+8NJfDjqSmsNTeHZZWDCiqr0+vxxuFATHo6omJj+WYifyc59Qf1bG9T7HZPD8U+bm+nDXkyPa0YrwQqioGhrg7PLBY6rZ+rqvAgPx+kype7u6KpZ1FIKCzE0cQEjicm8KSzE+lGIx8RJVqlUAGWZfTXyAgSi4tptXTR0fTh5NV36tn7gtVVrBmN9J7bhPLYlcZGzjuj0QkJuDo9RYbJhEyTie5YZJp9oxAVEyOITjCrQzAV5RuM47jUG49nb99uF+xMDHbj8YBUe6ujAzmDgzhbXBQsV097e5Ha0IArlwvO8nJ4NjdlZz8UKF/ZxZIS7mJ5mX+IdwVJbqMTE/GlqkqEYBndsViQXFkJfVwczXogcKhQyXXWd6rJDpZUVoaFggIB1reZSCO+Gh+n4MWiIlyfn4sGFw5UhGUZJNPOdiaS24yWFloxdiz01/Us42RbvlhfF2DDhUpWloBvLi/5BzHAtduNr7W1OHc68XJsDCczM4LsJldXI7u/H7s2G7/mejUGPY/KhlnmA7IHmcy2NtpArtlZej4gYHJkZAca8v1k9Xhht8PtdIqOj5GoqOR2KzWwbKsV93Nz8am0FM9tNh6s5JdCJKEBDzIM/npykq65K/X1IFuvUnCkoYqwZHX4d3KCo7Ex6lcCvg2oIqxUNBiYLE/fW1sj3vX++ky2wfzeqNfTf3k32m1VVHGDKV1ubhsacgx8B6AGNCJYtaBhY9WEhoVVGxoy9i6gIWHvCho09i6hQWHvGqoYqwWoIqxWoLJYLUEDYrUG9YvVIlQSq1WoCKtlqACrdSiP/ZCS0hmJ3/VKD+qhfu4/FKWyuY2F0y4AAAAASUVORK5CYII="}}]);